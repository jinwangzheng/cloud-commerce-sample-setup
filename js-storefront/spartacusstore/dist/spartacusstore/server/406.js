"use strict";var __defProp=Object.defineProperty,__name=(target,value)=>__defProp(target,"name",{value,configurable:!0});exports.id=406,exports.ids=[406],exports.modules={8406:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ProductImageZoomModule:()=>spartacus_product_image_zoom_ProductImageZoomModule});var core=__webpack_require__(305),common=__webpack_require__(9318),router=__webpack_require__(8258),spartacus_core=__webpack_require__(7093),spartacus_storefront=__webpack_require__(3525),BehaviorSubject=__webpack_require__(403),Subscription=__webpack_require__(1765),merge=__webpack_require__(6273),combineLatest=__webpack_require__(85),fromEvent=__webpack_require__(4189),of=__webpack_require__(5202),filter=__webpack_require__(2026),map=__webpack_require__(6466),switchMap=__webpack_require__(3714),tap=__webpack_require__(5171),distinctUntilChanged=__webpack_require__(3029),shareReplay=__webpack_require__(1753),switchMapTo=__webpack_require__(6399);function ProductImageZoomThumbnailsComponent_ng_container_0_cx_carousel_1_Template(rf,ctx){if(1&rf&&core._UZ(0,"cx-carousel",3),2&rf){const thumbs_r3=core.oxw().ngIf;core.oxw();const _r1=core.MAs(3);core.Q6J("items",thumbs_r3)("hideIndicators",!1)("template",_r1)}}function ProductImageZoomThumbnailsComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ProductImageZoomThumbnailsComponent_ng_container_0_cx_carousel_1_Template,1,3,"cx-carousel",2),core.BQk()),2&rf){const thumbs_r3=ctx.ngIf;core.xp6(1),core.Q6J("ngIf",thumbs_r3.length)}}function ProductImageZoomThumbnailsComponent_ng_template_2_Template(rf,ctx){if(1&rf){const _r8=core.EpF();core.TgZ(0,"cx-media",4),core.NdJ("focus",__name(function(){const item_r6=core.CHM(_r8).item,ctx_r7=core.oxw();return core.KtG(ctx_r7.openImage(item_r6.container))},"ProductImageZoomThumbnailsComponent_ng_template_2_Template_cx_media_focus_0_listener")),core.ALo(1,"async"),core.qZA()}if(2&rf){const item_r6=ctx.item,ctx_r2=core.oxw();core.ekj("is-active",core.lcZ(1,3,ctx_r2.isActive(item_r6.container))),core.Q6J("container",item_r6.container)}}__name(ProductImageZoomThumbnailsComponent_ng_container_0_cx_carousel_1_Template,"ProductImageZoomThumbnailsComponent_ng_container_0_cx_carousel_1_Template"),__name(ProductImageZoomThumbnailsComponent_ng_container_0_Template,"ProductImageZoomThumbnailsComponent_ng_container_0_Template"),__name(ProductImageZoomThumbnailsComponent_ng_template_2_Template,"ProductImageZoomThumbnailsComponent_ng_template_2_Template");const _c0=["defaultImage"],_c1=["zoomContainer"],_c2=["zoomedImage"];function ProductImageZoomViewComponent_ng_container_0_div_1_button_2_Template(rf,ctx){if(1&rf){const _r10=core.EpF();core.TgZ(0,"button",8),core.NdJ("click",__name(function(){const previousProduct_r8=core.CHM(_r10).ngIf,ctx_r9=core.oxw(3);return core.KtG(ctx_r9.openImage(previousProduct_r8.container))},"ProductImageZoomViewComponent_ng_container_0_div_1_button_2_Template_button_click_0_listener")),core._UZ(1,"cx-icon",9),core.qZA()}if(2&rf){const ctx_r4=core.oxw(3);core.xp6(1),core.Q6J("type",ctx_r4.iconType.CARET_LEFT)}}function ProductImageZoomViewComponent_ng_container_0_div_1_cx_media_4_Template(rf,ctx){if(1&rf&&core._UZ(0,"cx-media",10,11),2&rf){const main_r1=core.oxw(2).ngIf;core.Q6J("container",main_r1)}}function ProductImageZoomViewComponent_ng_container_0_div_1_div_5_Template(rf,ctx){if(1&rf){const _r16=core.EpF();core.TgZ(0,"div",12,13)(2,"cx-media",14,15),core.NdJ("mousemove",__name(function($event){core.CHM(_r16);const ctx_r15=core.oxw(3);return core.KtG(ctx_r15.pointerMove($event))},"ProductImageZoomViewComponent_ng_container_0_div_1_div_5_Template_cx_media_mousemove_2_listener"))("touchmove",__name(function($event){core.CHM(_r16);const ctx_r17=core.oxw(3);return core.KtG(ctx_r17.touchMove($event))},"ProductImageZoomViewComponent_ng_container_0_div_1_div_5_Template_cx_media_touchmove_2_listener"))("touchend",__name(function(){core.CHM(_r16);const ctx_r18=core.oxw(3);return core.KtG(ctx_r18.clearTouch())},"ProductImageZoomViewComponent_ng_container_0_div_1_div_5_Template_cx_media_touchend_2_listener")),core.qZA()()}if(2&rf){const main_r1=core.oxw(2).ngIf;core.xp6(2),core.Q6J("container",main_r1)}}function ProductImageZoomViewComponent_ng_container_0_div_1_button_7_Template(rf,ctx){if(1&rf){const _r22=core.EpF();core.TgZ(0,"button",8),core.NdJ("click",__name(function(){const nextProduct_r20=core.CHM(_r22).ngIf,ctx_r21=core.oxw(3);return core.KtG(ctx_r21.openImage(nextProduct_r20.container))},"ProductImageZoomViewComponent_ng_container_0_div_1_button_7_Template_button_click_0_listener")),core._UZ(1,"cx-icon",9),core.qZA()}if(2&rf){const ctx_r7=core.oxw(3);core.xp6(1),core.Q6J("type",ctx_r7.iconType.CARET_RIGHT)}}function ProductImageZoomViewComponent_ng_container_0_div_1_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",3)(1,"div",4),core.YNc(2,ProductImageZoomViewComponent_ng_container_0_div_1_button_2_Template,2,1,"button",5),core.ALo(3,"async"),core.qZA(),core.YNc(4,ProductImageZoomViewComponent_ng_container_0_div_1_cx_media_4_Template,2,1,"cx-media",6),core.YNc(5,ProductImageZoomViewComponent_ng_container_0_div_1_div_5_Template,4,1,"div",7),core.TgZ(6,"div",4),core.YNc(7,ProductImageZoomViewComponent_ng_container_0_div_1_button_7_Template,2,1,"button",5),core.ALo(8,"async"),core.qZA()()),2&rf){const thumbs_r3=ctx.ngIf,ctx_r2=core.oxw(2);core.xp6(2),core.Q6J("ngIf",core.lcZ(3,4,ctx_r2.getPreviousProduct(thumbs_r3))),core.xp6(2),core.Q6J("ngIf",!ctx_r2.isZoomed),core.xp6(1),core.Q6J("ngIf",ctx_r2.isZoomed),core.xp6(2),core.Q6J("ngIf",core.lcZ(8,6,ctx_r2.getNextProduct(thumbs_r3)))}}function ProductImageZoomViewComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ProductImageZoomViewComponent_ng_container_0_div_1_Template,9,8,"div",2),core.ALo(2,"async"),core.BQk()),2&rf){const ctx_r0=core.oxw();core.xp6(1),core.Q6J("ngIf",core.lcZ(2,1,ctx_r0.thumbnails$))}}__name(ProductImageZoomViewComponent_ng_container_0_div_1_button_2_Template,"ProductImageZoomViewComponent_ng_container_0_div_1_button_2_Template"),__name(ProductImageZoomViewComponent_ng_container_0_div_1_cx_media_4_Template,"ProductImageZoomViewComponent_ng_container_0_div_1_cx_media_4_Template"),__name(ProductImageZoomViewComponent_ng_container_0_div_1_div_5_Template,"ProductImageZoomViewComponent_ng_container_0_div_1_div_5_Template"),__name(ProductImageZoomViewComponent_ng_container_0_div_1_button_7_Template,"ProductImageZoomViewComponent_ng_container_0_div_1_button_7_Template"),__name(ProductImageZoomViewComponent_ng_container_0_div_1_Template,"ProductImageZoomViewComponent_ng_container_0_div_1_Template"),__name(ProductImageZoomViewComponent_ng_container_0_Template,"ProductImageZoomViewComponent_ng_container_0_Template");const _c3=["expandButton"];function ProductImageZoomProductImagesComponent_ng_container_0_Template(rf,ctx){if(1&rf){const _r6=core.EpF();core.ynx(0),core.TgZ(1,"cx-media",2),core.NdJ("click",__name(function(){core.CHM(_r6);const ctx_r5=core.oxw();return core.KtG(ctx_r5.triggerZoom(!0))},"ProductImageZoomProductImagesComponent_ng_container_0_Template_cx_media_click_1_listener")),core.qZA(),core.TgZ(2,"cx-product-image-zoom-trigger",3),core.NdJ("dialogClose",__name(function(){core.CHM(_r6);const ctx_r7=core.oxw();return core.KtG(ctx_r7.triggerZoom(!1))},"ProductImageZoomProductImagesComponent_ng_container_0_Template_cx_product_image_zoom_trigger_dialogClose_2_listener")),core.qZA(),core.BQk()}if(2&rf){const main_r4=ctx.ngIf,ctx_r0=core.oxw();core.xp6(1),core.Q6J("container",main_r4),core.xp6(1),core.Q6J("expandImage",ctx_r0.expandImage.value)("galleryIndex",ctx_r0.selectedIndex)}}__name(ProductImageZoomProductImagesComponent_ng_container_0_Template,"ProductImageZoomProductImagesComponent_ng_container_0_Template");const _c4=__name(function(a0){return{product:a0}},"_c4");function ProductImageZoomProductImagesComponent_ng_container_2_ng_container_1_cx_carousel_1_Template(rf,ctx){if(1&rf&&(core._UZ(0,"cx-carousel",5),core.ALo(1,"cxTranslate")),2&rf){const product_r10=core.oxw().ngIf,thumbs_r8=core.oxw().ngIf;core.oxw();const _r2=core.MAs(5);core.Q6J("items",thumbs_r8)("hideIndicators",!1)("template",_r2),core.uIk("aria-label",core.xi3(1,4,"carousel.carouselForProduct",core.VKq(7,_c4,product_r10.name)))}}function ProductImageZoomProductImagesComponent_ng_container_2_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ProductImageZoomProductImagesComponent_ng_container_2_ng_container_1_cx_carousel_1_Template,2,9,"cx-carousel",4),core.BQk()),2&rf){const thumbs_r8=core.oxw().ngIf;core.xp6(1),core.Q6J("ngIf",thumbs_r8.length)}}function ProductImageZoomProductImagesComponent_ng_container_2_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ProductImageZoomProductImagesComponent_ng_container_2_ng_container_1_Template,2,1,"ng-container",0),core.ALo(2,"async"),core.BQk()),2&rf){const ctx_r1=core.oxw();core.xp6(1),core.Q6J("ngIf",core.lcZ(2,1,ctx_r1.product$))}}function ProductImageZoomProductImagesComponent_ng_template_4_Template(rf,ctx){if(1&rf){const _r17=core.EpF();core.TgZ(0,"cx-media",6),core.NdJ("focus",__name(function(){const item_r15=core.CHM(_r17).item,ctx_r16=core.oxw();return core.KtG(ctx_r16.openImage(item_r15.container))},"ProductImageZoomProductImagesComponent_ng_template_4_Template_cx_media_focus_0_listener")),core.ALo(1,"async"),core.qZA()}if(2&rf){const item_r15=ctx.item,ctx_r3=core.oxw();core.ekj("is-active",core.lcZ(1,3,ctx_r3.isActive(item_r15.container))),core.Q6J("container",item_r15.container)}}__name(ProductImageZoomProductImagesComponent_ng_container_2_ng_container_1_cx_carousel_1_Template,"ProductImageZoomProductImagesComponent_ng_container_2_ng_container_1_cx_carousel_1_Template"),__name(ProductImageZoomProductImagesComponent_ng_container_2_ng_container_1_Template,"ProductImageZoomProductImagesComponent_ng_container_2_ng_container_1_Template"),__name(ProductImageZoomProductImagesComponent_ng_container_2_Template,"ProductImageZoomProductImagesComponent_ng_container_2_Template"),__name(ProductImageZoomProductImagesComponent_ng_template_4_Template,"ProductImageZoomProductImagesComponent_ng_template_4_Template");class ProductImageZoomThumbnailsComponent{constructor(){this.mainMediaContainer=new BehaviorSubject.X({}),this.productImage=new core.vpe,this.subscription=new Subscription.w}ngOnInit(){this.subscription.add(this.activeThumb.subscribe(image=>{this.mainMediaContainer.next(image)}))}openImage(image){this.mainMediaContainer.next(image),"number"==typeof image.zoom?.galleryIndex&&this.productImage.emit({image,index:image.zoom.galleryIndex})}isActive(thumbnail){return this.mainMediaContainer.asObservable().pipe((0,filter.h)(spartacus_core.jWE),(0,map.U)(container=>container.zoom?.url&&thumbnail.zoom?.url&&container.zoom.url===thumbnail.zoom.url))}ngOnDestroy(){this.subscription.unsubscribe()}}__name(ProductImageZoomThumbnailsComponent,"ProductImageZoomThumbnailsComponent"),ProductImageZoomThumbnailsComponent.\u0275fac=__name(function(t){return new(t||ProductImageZoomThumbnailsComponent)},"ProductImageZoomThumbnailsComponent_Factory"),ProductImageZoomThumbnailsComponent.\u0275cmp=core.Xpm({type:ProductImageZoomThumbnailsComponent,selectors:[["cx-product-image-zoom-thumbnails"]],inputs:{thumbs$:"thumbs$",activeThumb:"activeThumb"},outputs:{productImage:"productImage"},decls:4,vars:3,consts:[[4,"ngIf"],["thumb",""],["class","thumbs","itemWidth","70px",3,"items","hideIndicators","template",4,"ngIf"],["itemWidth","70px",1,"thumbs",3,"items","hideIndicators","template"],["tabindex","0",3,"container","focus"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,ProductImageZoomThumbnailsComponent_ng_container_0_Template,2,1,"ng-container",0),core.ALo(1,"async"),core.YNc(2,ProductImageZoomThumbnailsComponent_ng_template_2_Template,2,5,"ng-template",null,1,core.W1O)),2&rf&&core.Q6J("ngIf",core.lcZ(1,1,ctx.thumbs$))},"ProductImageZoomThumbnailsComponent_Template"),dependencies:[spartacus_storefront.Fy4,common.O5,spartacus_storefront.R7z,common.Ov],encapsulation:2,changeDetection:0});class ProductImageZoomViewComponent{get defaultImage(){return this._defaultImage}set defaultImage(el){el&&(this._defaultImage=el,this.defaultImageReady.next(!0))}get zoomImage(){return this._zoomImage}set zoomImage(el){el&&(this._zoomImage=el,this.zoomReady.next(!0))}constructor(currentProductService,renderer,cdRef,breakpointService){this.currentProductService=currentProductService,this.renderer=renderer,this.cdRef=cdRef,this.breakpointService=breakpointService,this.iconType=spartacus_storefront.e1G,this.mainMediaContainer=new BehaviorSubject.X(null),this.defaultImageReady=new BehaviorSubject.X(!1),this.zoomReady=new BehaviorSubject.X(!1),this.subscription=new Subscription.w,this.mainMediaContainer$=this.mainMediaContainer.asObservable(),this.defaultImageReady$=this.defaultImageReady.asObservable(),this.zoomReady$=this.zoomReady.asObservable(),this.activeThumb=new core.vpe,this.defaultImageClickHandler$=this.defaultImageReady$.pipe((0,filter.h)(Boolean),(0,switchMap.w)(_=>(0,merge.T)(...this.clickOrDoubleClick(this.defaultImage)).pipe((0,tap.b)(()=>this.zoom())))),this.zoomImageClickHandler$=this.zoomReady$.pipe((0,filter.h)(Boolean),(0,switchMap.w)(_=>(0,merge.T)(...this.clickOrDoubleClick(this.zoomImage)).pipe((0,tap.b)(()=>this.zoom())))),this.startCoords=null,this.left=0,this.top=0,this.isZoomed=!1,this.product$=this.currentProductService.getProduct().pipe((0,filter.h)(spartacus_core.jWE),(0,distinctUntilChanged.x)(),(0,tap.b)(p=>{if(this.galleryIndex){const image=Array.isArray(p.images?.GALLERY)?p.images?.GALLERY.find(img=>img.zoom?.galleryIndex===this.galleryIndex):p.images?.GALLERY;this.mainMediaContainer.next(image||null)}else this.mainMediaContainer.next(p.images?.PRIMARY?p.images.PRIMARY:{})}),(0,shareReplay.d)(1)),this.thumbnails$=this.product$.pipe((0,map.U)(p=>this.createThumbs(p)),(0,shareReplay.d)(1)),this.mainImage$=(0,combineLatest.aj)([this.product$,this.mainMediaContainer$]).pipe((0,map.U)(([,container])=>container))}ngOnInit(){this.subscription.add(this.defaultImageClickHandler$.subscribe()),this.subscription.add(this.zoomImageClickHandler$.subscribe())}openImage(item){this.mainMediaContainer.next(item),this.activeThumb.emit(item)}getActive(){return Array.isArray(this.mainMediaContainer.value)?this.mainMediaContainer.value[0].thumbnail?.galleryIndex||0:this.mainMediaContainer?.value?.thumbnail?.galleryIndex||0}getPreviousProduct(thumbs){const active=this.getActive();return 0===active?thumbs[active]:thumbs[active-1]}getNextProduct(thumbs){const active=this.getActive();return active===thumbs.length-1?thumbs[active]:thumbs[active+1]}zoom(){this.isZoomed=!this.isZoomed,this.startCoords=null,this.left=0,this.top=0,this.cdRef.markForCheck()}touchMove(event){const touch=event.touches[0]||event.changedTouches[0],boundingRect=this.zoomedImage?.nativeElement?.getBoundingClientRect(),imageElement=this.zoomedImage?.nativeElement?.firstChild;this.startCoords||(this.startCoords={x:touch.clientX,y:touch.clientY}),this.left+=touch.clientX-this.startCoords.x,this.top+=touch.clientY-this.startCoords.y,this.moveImage(this.left,this.top,boundingRect,imageElement),this.startCoords={x:touch.clientX,y:touch.clientY}}clearTouch(){this.startCoords=null}pointerMove(event){const boundingRect=this.zoomedImage.nativeElement.getBoundingClientRect(),imageElement=this.zoomedImage.nativeElement.firstChild,{positionX,positionY}=this.calculatePointerMovePosition(this.zoomedImage,event.clientX,event.clientY);this.moveImage(positionX,positionY,boundingRect,imageElement)}changeImage(event){this.mainMediaContainer.next(event.image)}moveImage(positionX,positionY,boundingRect,imageElement){const{x,y}=this.handleOutOfBounds(positionX,positionY,imageElement,boundingRect);imageElement&&(this.renderer.setStyle(imageElement,"left",x+"px"),this.renderer.setStyle(imageElement,"top",y+"px"))}ngOnDestroy(){this.subscription.unsubscribe()}clickOrDoubleClick(element){return[(0,fromEvent.R)(element.nativeElement,"click").pipe((0,switchMapTo.c)(this.breakpointService.isUp(spartacus_storefront.Bst.md)),(0,filter.h)(Boolean)),(0,fromEvent.R)(element.nativeElement,"dblclick").pipe((0,switchMapTo.c)(this.breakpointService.isDown(spartacus_storefront.Bst.lg)),(0,filter.h)(Boolean))]}createThumbs(product){return!product.images||!product.images.GALLERY||product.images.GALLERY.length<2?[]:product.images.GALLERY.map(c=>(0,of.of)({container:c}))}handleOutOfBounds(positionX,positionY,imageElement,boundingRect){return positionY<=60-imageElement?.height&&(positionY=60-imageElement?.height),positionY>=boundingRect?.height-60&&(positionY=boundingRect?.height-60),positionX<=-imageElement?.width-boundingRect?.width/2+60&&(positionX=-imageElement?.width-boundingRect?.width/2+60),positionX>=imageElement?.width+boundingRect?.width/2-60&&(positionX=imageElement?.width+boundingRect?.width/2-60),{x:positionX,y:positionY}}calculatePointerMovePosition(element,clientX,clientY){const boundingRect=element.nativeElement.getBoundingClientRect(),x=clientX-boundingRect.left,y=clientY-boundingRect.top;return{positionX:-x+element.nativeElement.clientWidth/2,positionY:-y+element.nativeElement.clientHeight/2}}}__name(ProductImageZoomViewComponent,"ProductImageZoomViewComponent"),ProductImageZoomViewComponent.\u0275fac=__name(function(t){return new(t||ProductImageZoomViewComponent)(core.Y36(spartacus_storefront.pHG),core.Y36(core.Qsj),core.Y36(core.sBO),core.Y36(spartacus_storefront.r))},"ProductImageZoomViewComponent_Factory"),ProductImageZoomViewComponent.\u0275cmp=core.Xpm({type:ProductImageZoomViewComponent,selectors:[["cx-product-image-zoom-view"]],viewQuery:__name(function(rf,ctx){if(1&rf&&(core.Gf(_c0,5,core.SBq),core.Gf(_c1,5,core.SBq),core.Gf(_c2,5,core.SBq)),2&rf){let _t;core.iGM(_t=core.CRH())&&(ctx.defaultImage=_t.first),core.iGM(_t=core.CRH())&&(ctx.zoomImage=_t.first),core.iGM(_t=core.CRH())&&(ctx.zoomedImage=_t.first)}},"ProductImageZoomViewComponent_Query"),inputs:{galleryIndex:"galleryIndex"},decls:3,vars:5,consts:[[4,"ngIf"],[3,"thumbs$","activeThumb","productImage"],["class","cx-main-image-group",4,"ngIf"],[1,"cx-main-image-group"],[1,"cx-navigate-image"],["class","btn btn-link",3,"click",4,"ngIf"],["class","cx-default-image-zoom",3,"container",4,"ngIf"],["class","cx-zoom-container",4,"ngIf"],[1,"btn","btn-link",3,"click"],[3,"type"],[1,"cx-default-image-zoom",3,"container"],["defaultImage",""],[1,"cx-zoom-container"],["zoomContainer",""],[1,"cx-image-zoomed",3,"container","mousemove","touchmove","touchend"],["zoomedImage",""]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,ProductImageZoomViewComponent_ng_container_0_Template,3,3,"ng-container",0),core.ALo(1,"async"),core.TgZ(2,"cx-product-image-zoom-thumbnails",1),core.NdJ("productImage",__name(function($event){return ctx.changeImage($event)},"ProductImageZoomViewComponent_Template_cx_product_image_zoom_thumbnails_productImage_2_listener")),core.qZA()),2&rf&&(core.Q6J("ngIf",core.lcZ(1,3,ctx.mainImage$)),core.xp6(2),core.Q6J("thumbs$",ctx.thumbnails$)("activeThumb",ctx.activeThumb))},"ProductImageZoomViewComponent_Template"),dependencies:[common.O5,spartacus_storefront.oJW,spartacus_storefront.R7z,ProductImageZoomThumbnailsComponent,common.Ov],encapsulation:2,changeDetection:0});class ProductImageZoomDialogComponent{handleClick(event){event.target.tagName===this.el.nativeElement.tagName&&this.close("Cross click")}constructor(launchDialogService,el){this.launchDialogService=launchDialogService,this.el=el,this.iconType=spartacus_storefront.e1G,this.focusConfig={trap:!0,block:!0,autofocus:"button",focusOnEscape:!0}}close(reason=""){this.launchDialogService.closeDialog(reason)}}__name(ProductImageZoomDialogComponent,"ProductImageZoomDialogComponent"),ProductImageZoomDialogComponent.\u0275fac=__name(function(t){return new(t||ProductImageZoomDialogComponent)(core.Y36(spartacus_storefront.Q3W),core.Y36(core.SBq))},"ProductImageZoomDialogComponent_Factory"),ProductImageZoomDialogComponent.\u0275cmp=core.Xpm({type:ProductImageZoomDialogComponent,selectors:[["cx-product-image-zoom-dialog"]],hostBindings:__name(function(rf,ctx){1&rf&&core.NdJ("click",__name(function($event){return ctx.handleClick($event)},"ProductImageZoomDialogComponent_click_HostBindingHandler"))},"ProductImageZoomDialogComponent_HostBindings"),inputs:{galleryIndex:"galleryIndex"},decls:9,vars:6,consts:[[1,"cx-image-zoom-dialog",3,"cxFocus"],[1,"cx-dialog-content"],[1,"cx-dialog-header"],["type","button",1,"close",3,"click"],["aria-hidden","true"],[3,"type"],[1,"cx-dialog-body"],[3,"galleryIndex"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),core.NdJ("click",__name(function(){return ctx.close("cross click")},"ProductImageZoomDialogComponent_Template_button_click_3_listener")),core.ALo(4,"cxTranslate"),core.TgZ(5,"span",4),core._UZ(6,"cx-icon",5),core.qZA()()(),core.TgZ(7,"div",6),core._UZ(8,"cx-product-image-zoom-view",7),core.qZA()()()),2&rf&&(core.Q6J("cxFocus",ctx.focusConfig),core.xp6(3),core.uIk("aria-label",core.lcZ(4,4,"productImageZoomDialog.close")),core.xp6(3),core.Q6J("type",ctx.iconType.CLOSE),core.xp6(2),core.Q6J("galleryIndex",ctx.galleryIndex))},"ProductImageZoomDialogComponent_Template"),dependencies:[spartacus_storefront.oJW,spartacus_storefront.RRe,ProductImageZoomViewComponent,spartacus_core.X$D],encapsulation:2,changeDetection:0});const defaultProductImageZoomLayoutConfig={launch:{PRODUCT_IMAGE_ZOOM:{inline:!0,component:ProductImageZoomDialogComponent,dialogType:spartacus_storefront.Myk.DIALOG}}};class ProductImageZoomTriggerComponent{set expandImage(expand){expand&&this.triggerZoom()}constructor(launchDialogService,vcr){this.launchDialogService=launchDialogService,this.vcr=vcr,this.iconType=spartacus_storefront.e1G,this.subscriptions=new Subscription.w,this.dialogClose=new core.vpe}triggerZoom(){const component=this.launchDialogService.launch("PRODUCT_IMAGE_ZOOM",this.vcr);component&&this.subscriptions.add((0,combineLatest.aj)([component,this.launchDialogService.dialogClose]).pipe((0,tap.b)(([comp])=>{this.galleryIndex&&(comp.instance.galleryIndex=this.galleryIndex)}),(0,filter.h)(([,close])=>Boolean(close)),(0,tap.b)(([comp])=>{this.launchDialogService.clear("PRODUCT_IMAGE_ZOOM"),comp?.destroy(),this.dialogClose.emit(),this.expandButton.nativeElement.focus()})).subscribe())}ngOnDestroy(){this.subscriptions.unsubscribe()}}__name(ProductImageZoomTriggerComponent,"ProductImageZoomTriggerComponent"),ProductImageZoomTriggerComponent.\u0275fac=__name(function(t){return new(t||ProductImageZoomTriggerComponent)(core.Y36(spartacus_storefront.Q3W),core.Y36(core.s_b))},"ProductImageZoomTriggerComponent_Factory"),ProductImageZoomTriggerComponent.\u0275cmp=core.Xpm({type:ProductImageZoomTriggerComponent,selectors:[["cx-product-image-zoom-trigger"]],viewQuery:__name(function(rf,ctx){if(1&rf&&core.Gf(_c3,5),2&rf){let _t;core.iGM(_t=core.CRH())&&(ctx.expandButton=_t.first)}},"ProductImageZoomTriggerComponent_Query"),inputs:{galleryIndex:"galleryIndex",expandImage:"expandImage"},outputs:{dialogClose:"dialogClose"},decls:6,vars:4,consts:[[1,"btn","btn-link","cx-action-link",3,"click"],["expandButton",""],[3,"type"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"button",0,1),core.NdJ("click",__name(function(){return ctx.triggerZoom()},"ProductImageZoomTriggerComponent_Template_button_click_0_listener")),core.TgZ(2,"span"),core._uU(3),core.ALo(4,"cxTranslate"),core._UZ(5,"cx-icon",2),core.qZA()()),2&rf&&(core.xp6(3),core.hij(" ",core.lcZ(4,2,"productImageZoomTrigger.expand")," "),core.xp6(2),core.Q6J("type",ctx.iconType.EXPAND_ARROWS))},"ProductImageZoomTriggerComponent_Template"),dependencies:[spartacus_storefront.oJW,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ProductImageZoomProductImagesComponent extends spartacus_storefront.xZn{constructor(currentProductService){super(currentProductService),this.currentProductService=currentProductService,this.expandImage=new BehaviorSubject.X(!1),this.product$=this.product$}openImage(item){this.mainMediaContainer.next(item),this.selectedIndex=this.mainMediaContainer.value?.zoom?.galleryIndex}triggerZoom(value){this.expandImage.next(value)}}__name(ProductImageZoomProductImagesComponent,"ProductImageZoomProductImagesComponent"),ProductImageZoomProductImagesComponent.\u0275fac=__name(function(t){return new(t||ProductImageZoomProductImagesComponent)(core.Y36(spartacus_storefront.pHG))},"ProductImageZoomProductImagesComponent_Factory"),ProductImageZoomProductImagesComponent.\u0275cmp=core.Xpm({type:ProductImageZoomProductImagesComponent,selectors:[["cx-product-images"]],features:[core.qOj],decls:6,vars:6,consts:[[4,"ngIf"],["thumb",""],[3,"container","click"],[3,"expandImage","galleryIndex","dialogClose"],["role","region","tabindex","-1","class","thumbs","itemWidth","120px",3,"items","hideIndicators","template",4,"ngIf"],["role","region","tabindex","-1","itemWidth","120px",1,"thumbs",3,"items","hideIndicators","template"],["tabindex","0","format","product",3,"container","focus"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,ProductImageZoomProductImagesComponent_ng_container_0_Template,3,3,"ng-container",0),core.ALo(1,"async"),core.YNc(2,ProductImageZoomProductImagesComponent_ng_container_2_Template,3,3,"ng-container",0),core.ALo(3,"async"),core.YNc(4,ProductImageZoomProductImagesComponent_ng_template_4_Template,2,5,"ng-template",null,1,core.W1O)),2&rf&&(core.Q6J("ngIf",core.lcZ(1,2,ctx.mainImage$)),core.xp6(2),core.Q6J("ngIf",core.lcZ(3,4,ctx.thumbs$)))},"ProductImageZoomProductImagesComponent_Template"),dependencies:[spartacus_storefront.Fy4,common.O5,spartacus_storefront.R7z,ProductImageZoomTriggerComponent,common.Ov,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ProductImageZoomModule{}__name(ProductImageZoomModule,"ProductImageZoomModule"),ProductImageZoomModule.\u0275fac=__name(function(t){return new(t||ProductImageZoomModule)},"ProductImageZoomModule_Factory"),ProductImageZoomModule.\u0275mod=core.oAB({type:ProductImageZoomModule}),ProductImageZoomModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)(defaultProductImageZoomLayoutConfig),(0,spartacus_core.i51)({cmsComponents:{ProductImagesComponent:{component:ProductImageZoomProductImagesComponent}}})],imports:[spartacus_storefront.bBg,common.ez,spartacus_core.LUR,spartacus_storefront.QX1,spartacus_storefront.oPH,spartacus_storefront.cOq,spartacus_storefront.f5$,router.Bz]});class ProductImageZoomComponentsModule{}__name(ProductImageZoomComponentsModule,"ProductImageZoomComponentsModule"),ProductImageZoomComponentsModule.\u0275fac=__name(function(t){return new(t||ProductImageZoomComponentsModule)},"ProductImageZoomComponentsModule_Factory"),ProductImageZoomComponentsModule.\u0275mod=core.oAB({type:ProductImageZoomComponentsModule}),ProductImageZoomComponentsModule.\u0275inj=core.cJS({imports:[ProductImageZoomModule]});class spartacus_product_image_zoom_ProductImageZoomModule{}__name(spartacus_product_image_zoom_ProductImageZoomModule,"spartacus_product_image_zoom_ProductImageZoomModule"),spartacus_product_image_zoom_ProductImageZoomModule.\u0275fac=__name(function(t){return new(t||spartacus_product_image_zoom_ProductImageZoomModule)},"ProductImageZoomModule_Factory"),spartacus_product_image_zoom_ProductImageZoomModule.\u0275mod=core.oAB({type:spartacus_product_image_zoom_ProductImageZoomModule}),spartacus_product_image_zoom_ProductImageZoomModule.\u0275inj=core.cJS({imports:[ProductImageZoomComponentsModule]})}};