"use strict";var __defProp=Object.defineProperty,__name=(target,value)=>__defProp(target,"name",{value,configurable:!0});exports.id=683,exports.ids=[683],exports.modules={1683:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{AsmModule:()=>AsmModule});var core=__webpack_require__(305),spartacus_storefront=__webpack_require__(3525),spartacus_core=__webpack_require__(7093),fesm2020_forms=__webpack_require__(3070),BehaviorSubject=__webpack_require__(403),Subscription=__webpack_require__(1765),combineLatest=__webpack_require__(85),iif=__webpack_require__(6293),defer=__webpack_require__(8673),empty=__webpack_require__(4614),of=__webpack_require__(5202),never=__webpack_require__(1275),map=__webpack_require__(6466),shareReplay=__webpack_require__(1753),take=__webpack_require__(5426),filter=__webpack_require__(2026),tap=__webpack_require__(5171),concatMap=__webpack_require__(6942),finalize=__webpack_require__(3970),debounceTime=__webpack_require__(6797),distinctUntilChanged=__webpack_require__(3029),switchMap=__webpack_require__(3714),spartacus_cart_base_root=__webpack_require__(405),spartacus_asm_root=__webpack_require__(1313),spartacus_cart_saved_cart_root=__webpack_require__(8109),common=__webpack_require__(9318),ng_select_ng_select=__webpack_require__(6476),catchError=__webpack_require__(2155),spartacus_user_account_root=__webpack_require__(2945),ngrx_store=__webpack_require__(7776),ngrx_effects=__webpack_require__(8468);class AsmAdapter{}__name(AsmAdapter,"AsmAdapter");class AsmConnector{constructor(asmAdapter){this.asmAdapter=asmAdapter}customerSearch(options){return this.asmAdapter.customerSearch(options)}customerLists(){return this.asmAdapter.customerLists()}bindCart(options){return this.asmAdapter.bindCart(options)}}__name(AsmConnector,"AsmConnector"),AsmConnector.\u0275fac=__name(function(t){return new(t||AsmConnector)(core.LFG(AsmAdapter))},"AsmConnector_Factory"),AsmConnector.\u0275prov=core.Yz7({token:AsmConnector,factory:AsmConnector.\u0275fac,providedIn:"root"});const CUSTOMER_SEARCH_PAGE_NORMALIZER=new core.OlP("CustomerSearchPageNormalizer"),CUSTOMER_LISTS_NORMALIZER=new core.OlP("CustomerListsNormalizer");class AsmBindCartService{constructor(commandService,asmConnector,userAccountFacade){this.commandService=commandService,this.asmConnector=asmConnector,this.userAccountFacade=userAccountFacade,this.bindCartCommand$=this.commandService.create(cartId=>this.userAccountFacade.get().pipe((0,map.U)(user=>{if(user?.uid)return user.uid;throw new Error("No identifier for authenticated user found.")}),(0,take.q)(1),(0,concatMap.b)(customerId=>this.asmConnector.bindCart({cartId,customerId}))))}bindCart(cartId){return this.bindCartCommand$.execute(cartId)}}__name(AsmBindCartService,"AsmBindCartService"),AsmBindCartService.\u0275fac=__name(function(t){return new(t||AsmBindCartService)(core.LFG(spartacus_core.VDr),core.LFG(AsmConnector),core.LFG(spartacus_user_account_root.gf))},"AsmBindCartService_Factory"),AsmBindCartService.\u0275prov=core.Yz7({token:AsmBindCartService,factory:AsmBindCartService.\u0275fac});const ASM_UI_UPDATE="[Asm] UI Update";class AsmUiUpdate{constructor(payload){this.payload=payload,this.type=ASM_UI_UPDATE}}__name(AsmUiUpdate,"AsmUiUpdate");const CUSTOMER_SEARCH_DATA="[asm] Customer search data",CUSTOMER_LIST_CUSTOMERS_SEARCH_DATA="[asm] Customer list customers search data";class CustomerSearch extends spartacus_core.kPG.LoaderLoadAction{constructor(payload){super(CUSTOMER_SEARCH_DATA),this.payload=payload,this.type="[Asm] Customer Search"}}__name(CustomerSearch,"CustomerSearch");class CustomerSearchFail extends spartacus_core.kPG.LoaderFailAction{constructor(payload){super(CUSTOMER_SEARCH_DATA),this.payload=payload,this.type="[Asm] Customer Search Fail"}}__name(CustomerSearchFail,"CustomerSearchFail");class CustomerSearchSuccess extends spartacus_core.kPG.LoaderSuccessAction{constructor(payload){super(CUSTOMER_SEARCH_DATA),this.payload=payload,this.type="[Asm] Customer Search Success"}}__name(CustomerSearchSuccess,"CustomerSearchSuccess");class CustomerSearchReset extends spartacus_core.kPG.LoaderResetAction{constructor(){super(CUSTOMER_SEARCH_DATA),this.type="[Asm] Customer Search Reset"}}__name(CustomerSearchReset,"CustomerSearchReset");class CustomerListCustomersSearch extends spartacus_core.kPG.LoaderLoadAction{constructor(payload){super(CUSTOMER_LIST_CUSTOMERS_SEARCH_DATA),this.payload=payload,this.type="[Asm] Customer List Customers Search"}}__name(CustomerListCustomersSearch,"CustomerListCustomersSearch");class CustomerListCustomersSearchFail extends spartacus_core.kPG.LoaderFailAction{constructor(payload){super(CUSTOMER_LIST_CUSTOMERS_SEARCH_DATA),this.payload=payload,this.type="[Asm] Customer List Customers Search Fail"}}__name(CustomerListCustomersSearchFail,"CustomerListCustomersSearchFail");class CustomerListCustomersSearchSuccess extends spartacus_core.kPG.LoaderSuccessAction{constructor(payload){super(CUSTOMER_LIST_CUSTOMERS_SEARCH_DATA),this.payload=payload,this.type="[Asm] Customer List Customers Search Success"}}__name(CustomerListCustomersSearchSuccess,"CustomerListCustomersSearchSuccess");class CustomerListCustomersSearchReset extends spartacus_core.kPG.LoaderResetAction{constructor(){super(CUSTOMER_LIST_CUSTOMERS_SEARCH_DATA),this.type="[Asm] Customer List Customers Search Reset"}}__name(CustomerListCustomersSearchReset,"CustomerListCustomersSearchReset");const LOGOUT_CUSTOMER_SUPPORT_AGENT="[Auth] Logout Customer Support Agent";class LogoutCustomerSupportAgent{constructor(){this.type=LOGOUT_CUSTOMER_SUPPORT_AGENT}}__name(LogoutCustomerSupportAgent,"LogoutCustomerSupportAgent");class CustomerEffects{constructor(actions$,asmConnector){this.actions$=actions$,this.asmConnector=asmConnector,this.customerSearch$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)("[Asm] Customer Search"),(0,map.U)(action=>action.payload),(0,switchMap.w)(options=>this.asmConnector.customerSearch(options).pipe((0,map.U)(customerSearchResults=>new CustomerSearchSuccess(customerSearchResults)),(0,catchError.K)(error=>(0,of.of)(new CustomerSearchFail((0,spartacus_core.cxH)(error)))))))),this.customerListCustomersSearch$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)("[Asm] Customer List Customers Search"),(0,map.U)(action=>action.payload),(0,switchMap.w)(options=>this.asmConnector.customerSearch(options).pipe((0,map.U)(customerListCustomersSearchResults=>new CustomerListCustomersSearchSuccess(customerListCustomersSearchResults)),(0,catchError.K)(error=>(0,of.of)(new CustomerListCustomersSearchFail((0,spartacus_core.cxH)(error))))))))}}__name(CustomerEffects,"CustomerEffects"),CustomerEffects.\u0275fac=__name(function(t){return new(t||CustomerEffects)(core.LFG(ngrx_effects.eX),core.LFG(AsmConnector))},"CustomerEffects_Factory"),CustomerEffects.\u0275prov=core.Yz7({token:CustomerEffects,factory:CustomerEffects.\u0275fac});const effects=[CustomerEffects],initialState={collapsed:!1};function reducer(state=initialState,action){return action.type===ASM_UI_UPDATE?{...state,...action.payload}:state}function getReducers(){return{customerSearchResult:spartacus_core.kPG.loaderReducer(CUSTOMER_SEARCH_DATA),customerListCustomersSearchResult:spartacus_core.kPG.loaderReducer(CUSTOMER_LIST_CUSTOMERS_SEARCH_DATA),asmUi:reducer}}__name(reducer,"reducer"),__name(getReducers,"getReducers");const reducerToken=new core.OlP("AsmReducers"),reducerProvider={provide:reducerToken,useFactory:getReducers};function clearCustomerSupportAgentAsmState(reducer2){return function(state,action){return action.type===LOGOUT_CUSTOMER_SUPPORT_AGENT&&(state={...state,customerSearchResult:{}}),reducer2(state,action)}}__name(clearCustomerSupportAgentAsmState,"clearCustomerSupportAgentAsmState");const metaReducers=[clearCustomerSupportAgentAsmState],getAsmState=(0,ngrx_store.ZF)("asm"),getAsmUi=(0,ngrx_store.P1)(getAsmState,state=>state.asmUi),getCustomerSearchResultsLoaderState=(0,ngrx_store.P1)(getAsmState,state=>state.customerSearchResult),getCustomerSearchResults=(0,ngrx_store.P1)(getCustomerSearchResultsLoaderState,state=>spartacus_core.kPG.loaderValueSelector(state)),getCustomerSearchResultsLoading=(0,ngrx_store.P1)(getCustomerSearchResultsLoaderState,state=>spartacus_core.kPG.loaderLoadingSelector(state)),getCustomerListCustomersSearchResultsLoaderState=(0,ngrx_store.P1)(getAsmState,state=>state.customerListCustomersSearchResult),getCustomerListCustomersSearchResults=(0,ngrx_store.P1)(getCustomerListCustomersSearchResultsLoaderState,state=>spartacus_core.kPG.loaderValueSelector(state)),getCustomerListCustomersSearchResultsLoading=(0,ngrx_store.P1)(getCustomerListCustomersSearchResultsLoaderState,state=>spartacus_core.kPG.loaderLoadingSelector(state)),getCustomerListCustomersSearchResultsError=(0,ngrx_store.P1)(getCustomerListCustomersSearchResultsLoaderState,state=>spartacus_core.kPG.loaderErrorSelector(state));class AsmCustomerListService{constructor(queryService,asmConnector,store){this.queryService=queryService,this.asmConnector=asmConnector,this.store=store,this.customerListQuery$=this.queryService.create(()=>this.asmConnector.customerLists(),{reloadOn:void 0,resetOn:void 0})}getCustomerLists(){return this.customerListQuery$.get()}getCustomerListsState(){return this.customerListQuery$.getState()}customerListCustomersSearch(options){this.store.dispatch(new CustomerListCustomersSearch(options))}getCustomerListCustomersSearchResults(){return this.store.pipe((0,ngrx_store.Ys)(getCustomerListCustomersSearchResults))}getCustomerListCustomersSearchResultsLoading(){return this.store.pipe((0,ngrx_store.Ys)(getCustomerListCustomersSearchResultsLoading))}customerListCustomersSearchReset(){this.store.dispatch(new CustomerListCustomersSearchReset)}getCustomerListCustomersSearchResultsError(){return this.store.pipe((0,ngrx_store.Ys)(getCustomerListCustomersSearchResultsError))}}__name(AsmCustomerListService,"AsmCustomerListService"),AsmCustomerListService.\u0275fac=__name(function(t){return new(t||AsmCustomerListService)(core.LFG(spartacus_core._7J),core.LFG(AsmConnector),core.LFG(ngrx_store.yh))},"AsmCustomerListService_Factory"),AsmCustomerListService.\u0275prov=core.Yz7({token:AsmCustomerListService,factory:AsmCustomerListService.\u0275fac});const facadeProviders=[AsmCustomerListService,{provide:spartacus_asm_root.AH,useExisting:AsmCustomerListService},AsmBindCartService,{provide:spartacus_asm_root.AE,useExisting:AsmBindCartService}];class AsmStatePersistenceService{constructor(statePersistenceService,store,authStorageService){this.statePersistenceService=statePersistenceService,this.store=store,this.authStorageService=authStorageService,this.subscription=new Subscription.w,this.key="asm"}initSync(){this.subscription.add(this.statePersistenceService.syncWithStorage({key:this.key,state$:this.getAsmState(),onRead:state=>this.onRead(state)}))}getAsmState(){return(0,combineLatest.aj)([this.store.pipe((0,filter.h)(store=>!!store.asm),(0,ngrx_store.Ys)(getAsmUi)),(0,of.of)(this.authStorageService.getEmulatedUserToken()),this.authStorageService.getTokenTarget()]).pipe((0,map.U)(([ui,emulatedUserToken,tokenTarget])=>{let emulatedToken=emulatedUserToken;return emulatedToken&&(emulatedToken={...emulatedUserToken},delete emulatedToken.refresh_token),{ui,emulatedUserToken:emulatedToken,tokenTarget}}))}onRead(state){state&&(state.ui&&this.store.dispatch(new AsmUiUpdate(state.ui)),state.emulatedUserToken&&this.authStorageService.setEmulatedUserToken(state.emulatedUserToken),state.tokenTarget&&this.authStorageService.setTokenTarget(state.tokenTarget))}ngOnDestroy(){this.subscription.unsubscribe()}}__name(AsmStatePersistenceService,"AsmStatePersistenceService"),AsmStatePersistenceService.\u0275fac=__name(function(t){return new(t||AsmStatePersistenceService)(core.LFG(spartacus_core.WBb),core.LFG(ngrx_store.yh),core.LFG(spartacus_asm_root.JW))},"AsmStatePersistenceService_Factory"),AsmStatePersistenceService.\u0275prov=core.Yz7({token:AsmStatePersistenceService,factory:AsmStatePersistenceService.\u0275fac,providedIn:"root"});class AsmStoreModule{}function asmStatePersistenceFactory(asmStatePersistenceService){return __name(()=>asmStatePersistenceService.initSync(),"result")}__name(AsmStoreModule,"AsmStoreModule"),AsmStoreModule.\u0275fac=__name(function(t){return new(t||AsmStoreModule)},"AsmStoreModule_Factory"),AsmStoreModule.\u0275mod=core.oAB({type:AsmStoreModule}),AsmStoreModule.\u0275inj=core.cJS({providers:[reducerProvider],imports:[common.ez,spartacus_core.vUS,ngrx_store.Aw.forFeature("asm",reducerToken,{metaReducers}),ngrx_effects.sQ.forFeature(effects)]}),__name(asmStatePersistenceFactory,"asmStatePersistenceFactory");class AsmCoreModule{}__name(AsmCoreModule,"AsmCoreModule"),AsmCoreModule.\u0275fac=__name(function(t){return new(t||AsmCoreModule)},"AsmCoreModule_Factory"),AsmCoreModule.\u0275mod=core.oAB({type:AsmCoreModule}),AsmCoreModule.\u0275inj=core.cJS({providers:[AsmConnector,{provide:spartacus_core.z4I,useFactory:asmStatePersistenceFactory,deps:[AsmStatePersistenceService],multi:!0},...facadeProviders],imports:[common.ez,AsmStoreModule]});class AsmService{constructor(store){this.store=store}customerSearch(options){this.store.dispatch(new CustomerSearch(options))}customerSearchReset(){this.store.dispatch(new CustomerSearchReset)}getCustomerSearchResults(){return this.store.pipe((0,ngrx_store.Ys)(getCustomerSearchResults))}getCustomerSearchResultsLoading(){return this.store.pipe((0,ngrx_store.Ys)(getCustomerSearchResultsLoading))}updateAsmUiState(asmUi){this.store.dispatch(new AsmUiUpdate(asmUi))}getAsmUiState(){return this.store.pipe((0,ngrx_store.Ys)(getAsmUi))}}__name(AsmService,"AsmService"),AsmService.\u0275fac=__name(function(t){return new(t||AsmService)(core.LFG(ngrx_store.yh))},"AsmService_Factory"),AsmService.\u0275prov=core.Yz7({token:AsmService,factory:AsmService.\u0275fac,providedIn:"root"});const _c0=["bindToCart"];function CSAgentLoginFormComponent_form_0_Template(rf,ctx){if(1&rf){const _r3=core.EpF();core.TgZ(0,"form",2),core.NdJ("ngSubmit",__name(function(){core.CHM(_r3);const ctx_r2=core.oxw();return core.KtG(ctx_r2.onSubmit())},"CSAgentLoginFormComponent_form_0_Template_form_ngSubmit_0_listener")),core.TgZ(1,"label"),core._UZ(2,"input",3),core.ALo(3,"cxTranslate"),core.ALo(4,"cxTranslate"),core._UZ(5,"cx-form-errors",4),core.qZA(),core.TgZ(6,"label"),core._UZ(7,"input",5),core.ALo(8,"cxTranslate"),core.ALo(9,"cxTranslate"),core._UZ(10,"cx-form-errors",4),core.qZA(),core.TgZ(11,"button",6),core._uU(12),core.ALo(13,"cxTranslate"),core.qZA()()}if(2&rf){const ctx_r0=core.oxw();core.Q6J("formGroup",ctx_r0.csAgentLoginForm),core.xp6(2),core.s9C("placeholder",core.lcZ(3,8,"asm.loginForm.userId.label")),core.uIk("aria-label",core.lcZ(4,10,"asm.loginForm.userId.label")),core.xp6(3),core.Q6J("control",ctx_r0.csAgentLoginForm.get("userId")),core.xp6(2),core.s9C("placeholder",core.lcZ(8,12,"asm.loginForm.password.label")),core.uIk("aria-label",core.lcZ(9,14,"asm.loginForm.password.label")),core.xp6(3),core.Q6J("control",ctx_r0.csAgentLoginForm.get("password")),core.xp6(2),core.hij(" ",core.lcZ(13,16,"asm.loginForm.submit")," ")}}function CSAgentLoginFormComponent_cx_dot_spinner_1_Template(rf,ctx){1&rf&&(core._UZ(0,"cx-dot-spinner",7),core.ALo(1,"cxTranslate")),2&rf&&core.uIk("aria-label",core.lcZ(1,1,"common.loading"))}__name(CSAgentLoginFormComponent_form_0_Template,"CSAgentLoginFormComponent_form_0_Template"),__name(CSAgentLoginFormComponent_cx_dot_spinner_1_Template,"CSAgentLoginFormComponent_cx_dot_spinner_1_Template");const _c1=["resultList"],_c2=["searchTerm"],_c3=["searchResultItem"];function CustomerSelectionComponent_div_10_button_2_Template(rf,ctx){if(1&rf){const _r11=core.EpF();core.TgZ(0,"button",10,11),core.NdJ("keydown.arrowup",__name(function($event){core.CHM(_r11);const ctx_r10=core.oxw(2);return core.KtG(ctx_r10.focusPreviousChild($event))},"CustomerSelectionComponent_div_10_button_2_Template_button_keydown_arrowup_0_listener"))("keydown.arrowdown",__name(function($event){core.CHM(_r11);const ctx_r12=core.oxw(2);return core.KtG(ctx_r12.focusNextChild($event))},"CustomerSelectionComponent_div_10_button_2_Template_button_keydown_arrowdown_0_listener"))("keydown.arrowright",__name(function($event){core.CHM(_r11);const ctx_r13=core.oxw(2);return core.KtG(ctx_r13.focusInputText($event))},"CustomerSelectionComponent_div_10_button_2_Template_button_keydown_arrowright_0_listener"))("keydown.arrowleft",__name(function($event){core.CHM(_r11);const ctx_r14=core.oxw(2);return core.KtG(ctx_r14.focusInputText($event))},"CustomerSelectionComponent_div_10_button_2_Template_button_keydown_arrowleft_0_listener"))("keydown.enter",__name(function($event){const result_r7=core.CHM(_r11).$implicit,ctx_r15=core.oxw(2);return core.KtG(ctx_r15.selectCustomerFromList($event,result_r7))},"CustomerSelectionComponent_div_10_button_2_Template_button_keydown_enter_0_listener"))("keydown.escape",__name(function($event){core.CHM(_r11);const ctx_r16=core.oxw(2);return core.KtG(ctx_r16.closeResults($event))},"CustomerSelectionComponent_div_10_button_2_Template_button_keydown_escape_0_listener"))("keydown.home",__name(function($event){core.CHM(_r11);const ctx_r17=core.oxw(2);return core.KtG(ctx_r17.focusInputText($event))},"CustomerSelectionComponent_div_10_button_2_Template_button_keydown_home_0_listener"))("keydown.end",__name(function($event){core.CHM(_r11);const ctx_r18=core.oxw(2);return core.KtG(ctx_r18.focusInputText($event))},"CustomerSelectionComponent_div_10_button_2_Template_button_keydown_end_0_listener"))("click",__name(function($event){const result_r7=core.CHM(_r11).$implicit,ctx_r19=core.oxw(2);return core.KtG(ctx_r19.selectCustomerFromList($event,result_r7))},"CustomerSelectionComponent_div_10_button_2_Template_button_click_0_listener")),core.TgZ(2,"span",12),core._uU(3),core.qZA(),core.TgZ(4,"span",13),core._uU(5),core.qZA()()}if(2&rf){const result_r7=ctx.$implicit,i_r8=ctx.index,ctx_r5=core.oxw(2);core.ekj("active",ctx_r5.activeFocusedButtonIndex===i_r8),core.Q6J("tabindex",ctx_r5.activeFocusedButtonIndex===i_r8?0:-1),core.uIk("aria-selected",ctx_r5.activeFocusedButtonIndex===i_r8),core.xp6(3),core.Oqu(result_r7.name),core.xp6(2),core.Oqu(result_r7.uid)}}function CustomerSelectionComponent_div_10_button_3_Template(rf,ctx){if(1&rf){const _r22=core.EpF();core.TgZ(0,"button",14,11),core.NdJ("click",__name(function($event){core.CHM(_r22);const ctx_r21=core.oxw(2);return core.KtG(ctx_r21.closeResults($event))},"CustomerSelectionComponent_div_10_button_3_Template_button_click_0_listener"))("keydown.enter",__name(function($event){core.CHM(_r22);const ctx_r23=core.oxw(2);return core.KtG(ctx_r23.closeResults($event))},"CustomerSelectionComponent_div_10_button_3_Template_button_keydown_enter_0_listener"))("keydown.escape",__name(function($event){core.CHM(_r22);const ctx_r24=core.oxw(2);return core.KtG(ctx_r24.closeResults($event))},"CustomerSelectionComponent_div_10_button_3_Template_button_keydown_escape_0_listener"))("keydown.arrowright",__name(function($event){core.CHM(_r22);const ctx_r25=core.oxw(2);return core.KtG(ctx_r25.focusInputText($event))},"CustomerSelectionComponent_div_10_button_3_Template_button_keydown_arrowright_0_listener"))("keydown.arrowleft",__name(function($event){core.CHM(_r22);const ctx_r26=core.oxw(2);return core.KtG(ctx_r26.focusInputText($event))},"CustomerSelectionComponent_div_10_button_3_Template_button_keydown_arrowleft_0_listener"))("keydown.home",__name(function($event){core.CHM(_r22);const ctx_r27=core.oxw(2);return core.KtG(ctx_r27.focusInputText($event))},"CustomerSelectionComponent_div_10_button_3_Template_button_keydown_home_0_listener"))("keydown.end",__name(function($event){core.CHM(_r22);const ctx_r28=core.oxw(2);return core.KtG(ctx_r28.focusInputText($event))},"CustomerSelectionComponent_div_10_button_3_Template_button_keydown_end_0_listener")),core._uU(2),core.ALo(3,"cxTranslate"),core.qZA()}if(2&rf){const ctx_r6=core.oxw(2);core.ekj("active",0===ctx_r6.activeFocusedButtonIndex),core.uIk("aria-selected",0===ctx_r6.activeFocusedButtonIndex),core.xp6(2),core.hij(" ",core.lcZ(3,4,"asm.customerSearch.noMatch")," ")}}function CustomerSelectionComponent_div_10_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",6,7),core.YNc(2,CustomerSelectionComponent_div_10_button_2_Template,6,6,"button",8),core.YNc(3,CustomerSelectionComponent_div_10_button_3_Template,4,6,"button",9),core.ALo(4,"async"),core.qZA()),2&rf){const results_r3=ctx.ngIf,ctx_r1=core.oxw(),_r0=core.MAs(3);core.xp6(2),core.Q6J("ngForOf",results_r3.entries),core.xp6(1),core.Q6J("ngIf",!core.lcZ(4,2,ctx_r1.searchResultsLoading$)&&_r0.value.length>=3&&!!results_r3.entries&&results_r3.entries.length<=0)}}function CustomerSelectionComponent_div_12_Template(rf,ctx){1&rf&&(core.TgZ(0,"div",6),core._UZ(1,"cx-dot-spinner",15),core.ALo(2,"cxTranslate"),core.qZA()),2&rf&&(core.xp6(1),core.uIk("aria-label",core.lcZ(2,1,"common.loading")))}function CustomerEmulationComponent_ng_container_0_Template(rf,ctx){if(1&rf){const _r2=core.EpF();core.ynx(0),core.TgZ(1,"div",1)(2,"label",2),core._uU(3),core.qZA(),core.TgZ(4,"label",3),core._uU(5),core.qZA()(),core._UZ(6,"cx-asm-bind-cart"),core.TgZ(7,"button",4),core.NdJ("click",__name(function(){core.CHM(_r2);const ctx_r1=core.oxw();return core.KtG(ctx_r1.logoutCustomer())},"CustomerEmulationComponent_ng_container_0_Template_button_click_7_listener")),core._uU(8),core.ALo(9,"cxTranslate"),core.qZA(),core.BQk()}if(2&rf){const ctx_r0=core.oxw();core.xp6(3),core.Oqu(null==ctx_r0.customer?null:ctx_r0.customer.name),core.xp6(2),core.Oqu(null==ctx_r0.customer?null:ctx_r0.customer.uid),core.xp6(3),core.hij(" ",core.lcZ(9,3,"asm.endSession")," ")}}function AsmToggleUiComponent_span_2_Template(rf,ctx){1&rf&&(core.TgZ(0,"span",3),core._uU(1),core.ALo(2,"cxTranslate"),core.qZA()),2&rf&&(core.xp6(1),core.hij(" ",core.lcZ(2,1,"asm.toggleUi.collapse")," "))}function AsmToggleUiComponent_span_3_Template(rf,ctx){1&rf&&(core.TgZ(0,"span",3),core._uU(1),core.ALo(2,"cxTranslate"),core.qZA()),2&rf&&(core.xp6(1),core.hij(" ",core.lcZ(2,1,"asm.toggleUi.expand")," "))}__name(CustomerSelectionComponent_div_10_button_2_Template,"CustomerSelectionComponent_div_10_button_2_Template"),__name(CustomerSelectionComponent_div_10_button_3_Template,"CustomerSelectionComponent_div_10_button_3_Template"),__name(CustomerSelectionComponent_div_10_Template,"CustomerSelectionComponent_div_10_Template"),__name(CustomerSelectionComponent_div_12_Template,"CustomerSelectionComponent_div_12_Template"),__name(CustomerEmulationComponent_ng_container_0_Template,"CustomerEmulationComponent_ng_container_0_Template"),__name(AsmToggleUiComponent_span_2_Template,"AsmToggleUiComponent_span_2_Template"),__name(AsmToggleUiComponent_span_3_Template,"AsmToggleUiComponent_span_3_Template");const _c4=["customerListLink"];function AsmMainUiComponent_div_8_Template(rf,ctx){if(1&rf){const _r7=core.EpF();core.TgZ(0,"div",9)(1,"a",10,11),core.NdJ("click",__name(function(){core.CHM(_r7);const ctx_r6=core.oxw();return core.KtG(ctx_r6.showCustomList())},"AsmMainUiComponent_div_8_Template_a_click_1_listener")),core._UZ(3,"cx-icon",12),core.TgZ(4,"span"),core._uU(5),core.ALo(6,"cxTranslate"),core.qZA()()()}if(2&rf){const ctx_r0=core.oxw();core.xp6(3),core.Q6J("type",ctx_r0.iconTypes.USER_FRIENDS),core.xp6(2),core.Oqu(core.lcZ(6,2,"asm.customers"))}}function AsmMainUiComponent_cx_asm_session_timer_11_Template(rf,ctx){1&rf&&core._UZ(0,"cx-asm-session-timer")}function AsmMainUiComponent_button_13_Template(rf,ctx){if(1&rf){const _r9=core.EpF();core.TgZ(0,"button",13),core.NdJ("click",__name(function(){core.CHM(_r9);const ctx_r8=core.oxw();return core.KtG(ctx_r8.hideUi())},"AsmMainUiComponent_button_13_Template_button_click_0_listener")),core.ALo(1,"cxTranslate"),core.qZA()}2&rf&&core.s9C("title",core.lcZ(1,1,"asm.hideUi"))}function AsmMainUiComponent_button_16_Template(rf,ctx){if(1&rf){const _r11=core.EpF();core.TgZ(0,"button",14),core.NdJ("click",__name(function(){core.CHM(_r11);const ctx_r10=core.oxw();return core.KtG(ctx_r10.logout())},"AsmMainUiComponent_button_16_Template_button_click_0_listener")),core.ALo(1,"cxTranslate"),core.qZA()}2&rf&&core.s9C("title",core.lcZ(1,1,"asm.logout"))}function AsmMainUiComponent_ng_container_18_ng_container_1_ng_container_1_cx_customer_emulation_1_Template(rf,ctx){1&rf&&core._UZ(0,"cx-customer-emulation")}function AsmMainUiComponent_ng_container_18_ng_container_1_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,AsmMainUiComponent_ng_container_18_ng_container_1_ng_container_1_cx_customer_emulation_1_Template,1,0,"cx-customer-emulation",6),core.BQk()),2&rf){const notCollapsed_r12=core.oxw(2).ngIf;core.xp6(1),core.Q6J("ngIf",notCollapsed_r12)}}function AsmMainUiComponent_ng_container_18_ng_container_1_ng_template_3_cx_customer_selection_0_Template(rf,ctx){if(1&rf){const _r23=core.EpF();core.TgZ(0,"cx-customer-selection",19),core.NdJ("submitEvent",__name(function($event){core.CHM(_r23);const ctx_r22=core.oxw(4);return core.KtG(ctx_r22.startCustomerEmulationSession($event))},"AsmMainUiComponent_ng_container_18_ng_container_1_ng_template_3_cx_customer_selection_0_Template_cx_customer_selection_submitEvent_0_listener")),core.qZA()}}function AsmMainUiComponent_ng_container_18_ng_container_1_ng_template_3_Template(rf,ctx){if(1&rf&&core.YNc(0,AsmMainUiComponent_ng_container_18_ng_container_1_ng_template_3_cx_customer_selection_0_Template,1,0,"cx-customer-selection",18),2&rf){const notCollapsed_r12=core.oxw(2).ngIf;core.Q6J("ngIf",notCollapsed_r12)}}function AsmMainUiComponent_ng_container_18_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,AsmMainUiComponent_ng_container_18_ng_container_1_ng_container_1_Template,2,1,"ng-container",15),core.ALo(2,"async"),core.YNc(3,AsmMainUiComponent_ng_container_18_ng_container_1_ng_template_3_Template,1,1,"ng-template",null,17,core.W1O),core.BQk()),2&rf){const _r17=core.MAs(4),ctx_r13=core.oxw(2);core.xp6(1),core.Q6J("ngIf",core.lcZ(2,2,ctx_r13.customer$))("ngIfElse",_r17)}}function AsmMainUiComponent_ng_container_18_ng_template_3_cx_csagent_login_form_0_Template(rf,ctx){if(1&rf){const _r27=core.EpF();core.TgZ(0,"cx-csagent-login-form",21),core.NdJ("submitEvent",__name(function($event){core.CHM(_r27);const ctx_r26=core.oxw(3);return core.KtG(ctx_r26.loginCustomerSupportAgent($event))},"AsmMainUiComponent_ng_container_18_ng_template_3_cx_csagent_login_form_0_Template_cx_csagent_login_form_submitEvent_0_listener")),core.ALo(1,"async"),core.qZA()}if(2&rf){const ctx_r25=core.oxw(3);core.Q6J("csAgentTokenLoading",core.lcZ(1,1,ctx_r25.csAgentTokenLoading$))}}function AsmMainUiComponent_ng_container_18_ng_template_3_Template(rf,ctx){if(1&rf&&core.YNc(0,AsmMainUiComponent_ng_container_18_ng_template_3_cx_csagent_login_form_0_Template,2,3,"cx-csagent-login-form",20),2&rf){const notCollapsed_r12=core.oxw().ngIf;core.Q6J("ngIf",notCollapsed_r12)}}function AsmMainUiComponent_ng_container_18_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,AsmMainUiComponent_ng_container_18_ng_container_1_Template,5,4,"ng-container",15),core.ALo(2,"async"),core.YNc(3,AsmMainUiComponent_ng_container_18_ng_template_3_Template,1,1,"ng-template",null,16,core.W1O),core.BQk()),2&rf){const _r14=core.MAs(4),ctx_r4=core.oxw();core.xp6(1),core.Q6J("ngIf",core.lcZ(2,2,ctx_r4.customerSupportAgentLoggedIn$))("ngIfElse",_r14)}}function CustomerListComponent_10_ng_template_0_Template(rf,ctx){}function CustomerListComponent_10_Template(rf,ctx){1&rf&&core.YNc(0,CustomerListComponent_10_ng_template_0_Template,0,0,"ng-template")}function CustomerListComponent_div_11_2_ng_template_0_Template(rf,ctx){}function CustomerListComponent_div_11_2_Template(rf,ctx){1&rf&&core.YNc(0,CustomerListComponent_div_11_2_ng_template_0_Template,0,0,"ng-template")}function CustomerListComponent_div_11_5_ng_template_0_Template(rf,ctx){}function CustomerListComponent_div_11_5_Template(rf,ctx){1&rf&&core.YNc(0,CustomerListComponent_div_11_5_ng_template_0_Template,0,0,"ng-template")}function CustomerListComponent_div_11_6_ng_template_0_Template(rf,ctx){}function CustomerListComponent_div_11_6_Template(rf,ctx){1&rf&&core.YNc(0,CustomerListComponent_div_11_6_ng_template_0_Template,0,0,"ng-template")}__name(AsmMainUiComponent_div_8_Template,"AsmMainUiComponent_div_8_Template"),__name(AsmMainUiComponent_cx_asm_session_timer_11_Template,"AsmMainUiComponent_cx_asm_session_timer_11_Template"),__name(AsmMainUiComponent_button_13_Template,"AsmMainUiComponent_button_13_Template"),__name(AsmMainUiComponent_button_16_Template,"AsmMainUiComponent_button_16_Template"),__name(AsmMainUiComponent_ng_container_18_ng_container_1_ng_container_1_cx_customer_emulation_1_Template,"AsmMainUiComponent_ng_container_18_ng_container_1_ng_container_1_cx_customer_emulation_1_Template"),__name(AsmMainUiComponent_ng_container_18_ng_container_1_ng_container_1_Template,"AsmMainUiComponent_ng_container_18_ng_container_1_ng_container_1_Template"),__name(AsmMainUiComponent_ng_container_18_ng_container_1_ng_template_3_cx_customer_selection_0_Template,"AsmMainUiComponent_ng_container_18_ng_container_1_ng_template_3_cx_customer_selection_0_Template"),__name(AsmMainUiComponent_ng_container_18_ng_container_1_ng_template_3_Template,"AsmMainUiComponent_ng_container_18_ng_container_1_ng_template_3_Template"),__name(AsmMainUiComponent_ng_container_18_ng_container_1_Template,"AsmMainUiComponent_ng_container_18_ng_container_1_Template"),__name(AsmMainUiComponent_ng_container_18_ng_template_3_cx_csagent_login_form_0_Template,"AsmMainUiComponent_ng_container_18_ng_template_3_cx_csagent_login_form_0_Template"),__name(AsmMainUiComponent_ng_container_18_ng_template_3_Template,"AsmMainUiComponent_ng_container_18_ng_template_3_Template"),__name(AsmMainUiComponent_ng_container_18_Template,"AsmMainUiComponent_ng_container_18_Template"),__name(CustomerListComponent_10_ng_template_0_Template,"CustomerListComponent_10_ng_template_0_Template"),__name(CustomerListComponent_10_Template,"CustomerListComponent_10_Template"),__name(CustomerListComponent_div_11_2_ng_template_0_Template,"CustomerListComponent_div_11_2_ng_template_0_Template"),__name(CustomerListComponent_div_11_2_Template,"CustomerListComponent_div_11_2_Template"),__name(CustomerListComponent_div_11_5_ng_template_0_Template,"CustomerListComponent_div_11_5_ng_template_0_Template"),__name(CustomerListComponent_div_11_5_Template,"CustomerListComponent_div_11_5_Template"),__name(CustomerListComponent_div_11_6_ng_template_0_Template,"CustomerListComponent_div_11_6_ng_template_0_Template"),__name(CustomerListComponent_div_11_6_Template,"CustomerListComponent_div_11_6_Template");const _c5=__name(function(a0){return{customerListsPage:a0}},"_c5");function CustomerListComponent_div_11_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",18),core.ALo(1,"async"),core.YNc(2,CustomerListComponent_div_11_2_Template,1,0,null,19),core.TgZ(3,"div",20),core.ALo(4,"async"),core.YNc(5,CustomerListComponent_div_11_5_Template,1,0,null,5),core.YNc(6,CustomerListComponent_div_11_6_Template,1,0,null,5),core.qZA()()),2&rf){const customerListsPage_r20=ctx.ngIf,ctx_r1=core.oxw(),_r15=core.MAs(33),_r11=core.MAs(29),_r13=core.MAs(31);core.ekj("tablet-mobile",core.lcZ(1,8,ctx_r1.breakpoint$)!==ctx_r1.BREAKPOINT.md),core.xp6(2),core.Q6J("ngTemplateOutlet",_r15)("ngTemplateOutletContext",core.VKq(12,_c5,customerListsPage_r20)),core.xp6(1),core.ekj("mobile",core.lcZ(4,10,ctx_r1.breakpoint$)===ctx_r1.BREAKPOINT.xs),core.xp6(2),core.Q6J("ngTemplateOutlet",_r11),core.xp6(1),core.Q6J("ngTemplateOutlet",_r13)}}function CustomerListComponent_div_16_Template(rf,ctx){1&rf&&(core.TgZ(0,"div",21),core._uU(1),core.ALo(2,"cxTranslate"),core.qZA()),2&rf&&(core.xp6(1),core.hij(" ",core.lcZ(2,1,"asm.customerList.noLists")," "))}function CustomerListComponent_div_17_Template(rf,ctx){1&rf&&(core.TgZ(0,"div",21),core._uU(1),core.ALo(2,"cxTranslate"),core.qZA()),2&rf&&(core.xp6(1),core.hij(" ",core.lcZ(2,1,"asm.customerList.listsError")," "))}function CustomerListComponent_div_18_Template(rf,ctx){1&rf&&(core.TgZ(0,"div",21),core._uU(1),core.ALo(2,"cxTranslate"),core.qZA()),2&rf&&(core.xp6(1),core.hij(" ",core.lcZ(2,1,"generalErrors.pageFailure")," "))}function CustomerListComponent_cx_spinner_20_Template(rf,ctx){1&rf&&core._UZ(0,"cx-spinner")}function CustomerListComponent_div_22_thead_5_th_2_Template(rf,ctx){1&rf&&(core.TgZ(0,"th",29)(1,"span",23),core._uU(2),core.ALo(3,"cxTranslate"),core.qZA()()),2&rf&&(core.xp6(2),core.hij(" ",core.lcZ(3,1,"asm.customerList.tableHeader.customer")," "))}function CustomerListComponent_div_22_thead_5_th_3_span_1_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"span"),core._uU(1),core.ALo(2,"cxTranslate"),core.qZA()),2&rf){const column_r33=core.oxw().$implicit;core.xp6(1),core.Oqu(core.lcZ(2,1,column_r33.headerLocalizationKey))}}function CustomerListComponent_div_22_thead_5_th_3_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"th",30),core.YNc(1,CustomerListComponent_div_22_thead_5_th_3_span_1_Template,3,3,"span",11),core.qZA()),2&rf){const column_r33=ctx.$implicit;core.xp6(1),core.Q6J("ngIf",column_r33.headerLocalizationKey)}}function CustomerListComponent_div_22_thead_5_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"thead")(1,"tr",26),core.YNc(2,CustomerListComponent_div_22_thead_5_th_2_Template,4,3,"th",27),core.YNc(3,CustomerListComponent_div_22_thead_5_th_3_Template,2,1,"th",28),core.qZA()()),2&rf){const ctx_r28=core.oxw(2);core.xp6(2),core.Q6J("ngIf",null==ctx_r28.customerListConfig?null:ctx_r28.customerListConfig.showAvatar),core.xp6(1),core.Q6J("ngForOf",null==ctx_r28.customerListConfig?null:ctx_r28.customerListConfig.columns)}}function CustomerListComponent_div_22_tr_8_td_1_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"td",33)(1,"div",34),core._uU(2),core.qZA()()),2&rf){const customerEntry_r36=core.oxw().$implicit,ctx_r37=core.oxw(2);core.xp6(2),core.hij(" ",ctx_r37.getBadgeText(customerEntry_r36)," ")}}function CustomerListComponent_div_22_tr_8_ng_container_2_td_1_1_ng_template_0_Template(rf,ctx){}function CustomerListComponent_div_22_tr_8_ng_container_2_td_1_1_Template(rf,ctx){1&rf&&core.YNc(0,CustomerListComponent_div_22_tr_8_ng_container_2_td_1_1_ng_template_0_Template,0,0,"ng-template")}__name(CustomerListComponent_div_11_Template,"CustomerListComponent_div_11_Template"),__name(CustomerListComponent_div_16_Template,"CustomerListComponent_div_16_Template"),__name(CustomerListComponent_div_17_Template,"CustomerListComponent_div_17_Template"),__name(CustomerListComponent_div_18_Template,"CustomerListComponent_div_18_Template"),__name(CustomerListComponent_cx_spinner_20_Template,"CustomerListComponent_cx_spinner_20_Template"),__name(CustomerListComponent_div_22_thead_5_th_2_Template,"CustomerListComponent_div_22_thead_5_th_2_Template"),__name(CustomerListComponent_div_22_thead_5_th_3_span_1_Template,"CustomerListComponent_div_22_thead_5_th_3_span_1_Template"),__name(CustomerListComponent_div_22_thead_5_th_3_Template,"CustomerListComponent_div_22_thead_5_th_3_Template"),__name(CustomerListComponent_div_22_thead_5_Template,"CustomerListComponent_div_22_thead_5_Template"),__name(CustomerListComponent_div_22_tr_8_td_1_Template,"CustomerListComponent_div_22_tr_8_td_1_Template"),__name(CustomerListComponent_div_22_tr_8_ng_container_2_td_1_1_ng_template_0_Template,"CustomerListComponent_div_22_tr_8_ng_container_2_td_1_1_ng_template_0_Template"),__name(CustomerListComponent_div_22_tr_8_ng_container_2_td_1_1_Template,"CustomerListComponent_div_22_tr_8_ng_container_2_td_1_1_Template");const _c6=__name(function(a0,a1){return{customerEntry:a0,column:a1,showHeader:!1}},"_c6");function CustomerListComponent_div_22_tr_8_ng_container_2_td_1_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"td",36),core.YNc(1,CustomerListComponent_div_22_tr_8_ng_container_2_td_1_1_Template,1,0,null,19),core.qZA()),2&rf){const column_r43=ctx.$implicit,customerEntry_r36=core.oxw(2).$implicit;core.oxw(2);const _r7=core.MAs(25);core.xp6(1),core.Q6J("ngTemplateOutlet",_r7)("ngTemplateOutletContext",core.WLB(2,_c6,customerEntry_r36,column_r43))}}function CustomerListComponent_div_22_tr_8_ng_container_2_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,CustomerListComponent_div_22_tr_8_ng_container_2_td_1_Template,2,5,"td",35),core.BQk()),2&rf){const ctx_r38=core.oxw(3);core.xp6(1),core.Q6J("ngForOf",null==ctx_r38.customerListConfig?null:ctx_r38.customerListConfig.columns)}}function CustomerListComponent_div_22_tr_8_ng_container_4_ng_container_2_ng_container_1_1_ng_template_0_Template(rf,ctx){}function CustomerListComponent_div_22_tr_8_ng_container_4_ng_container_2_ng_container_1_1_Template(rf,ctx){1&rf&&core.YNc(0,CustomerListComponent_div_22_tr_8_ng_container_4_ng_container_2_ng_container_1_1_ng_template_0_Template,0,0,"ng-template")}__name(CustomerListComponent_div_22_tr_8_ng_container_2_td_1_Template,"CustomerListComponent_div_22_tr_8_ng_container_2_td_1_Template"),__name(CustomerListComponent_div_22_tr_8_ng_container_2_Template,"CustomerListComponent_div_22_tr_8_ng_container_2_Template"),__name(CustomerListComponent_div_22_tr_8_ng_container_4_ng_container_2_ng_container_1_1_ng_template_0_Template,"CustomerListComponent_div_22_tr_8_ng_container_4_ng_container_2_ng_container_1_1_ng_template_0_Template"),__name(CustomerListComponent_div_22_tr_8_ng_container_4_ng_container_2_ng_container_1_1_Template,"CustomerListComponent_div_22_tr_8_ng_container_4_ng_container_2_ng_container_1_1_Template");const _c7=__name(function(a0,a1){return{customerEntry:a0,column:a1,showHeader:!0}},"_c7");function CustomerListComponent_div_22_tr_8_ng_container_4_ng_container_2_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,CustomerListComponent_div_22_tr_8_ng_container_4_ng_container_2_ng_container_1_1_Template,1,0,null,19),core.BQk()),2&rf){const column_r49=core.oxw().$implicit,customerEntry_r36=core.oxw(2).$implicit;core.oxw(2);const _r7=core.MAs(25);core.xp6(1),core.Q6J("ngTemplateOutlet",_r7)("ngTemplateOutletContext",core.WLB(2,_c7,customerEntry_r36,column_r49))}}function CustomerListComponent_div_22_tr_8_ng_container_4_ng_container_2_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,CustomerListComponent_div_22_tr_8_ng_container_4_ng_container_2_ng_container_1_Template,2,5,"ng-container",11),core.BQk()),2&rf){const even_r50=ctx.even;core.xp6(1),core.Q6J("ngIf",even_r50)}}function CustomerListComponent_div_22_tr_8_ng_container_4_ng_container_4_ng_container_1_1_ng_template_0_Template(rf,ctx){}function CustomerListComponent_div_22_tr_8_ng_container_4_ng_container_4_ng_container_1_1_Template(rf,ctx){1&rf&&core.YNc(0,CustomerListComponent_div_22_tr_8_ng_container_4_ng_container_4_ng_container_1_1_ng_template_0_Template,0,0,"ng-template")}function CustomerListComponent_div_22_tr_8_ng_container_4_ng_container_4_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,CustomerListComponent_div_22_tr_8_ng_container_4_ng_container_4_ng_container_1_1_Template,1,0,null,19),core.BQk()),2&rf){const column_r56=core.oxw().$implicit,customerEntry_r36=core.oxw(2).$implicit;core.oxw(2);const _r7=core.MAs(25);core.xp6(1),core.Q6J("ngTemplateOutlet",_r7)("ngTemplateOutletContext",core.WLB(2,_c7,customerEntry_r36,column_r56))}}function CustomerListComponent_div_22_tr_8_ng_container_4_ng_container_4_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,CustomerListComponent_div_22_tr_8_ng_container_4_ng_container_4_ng_container_1_Template,2,5,"ng-container",11),core.BQk()),2&rf){const odd_r57=ctx.odd;core.xp6(1),core.Q6J("ngIf",odd_r57)}}function CustomerListComponent_div_22_tr_8_ng_container_4_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"td",37),core.YNc(2,CustomerListComponent_div_22_tr_8_ng_container_4_ng_container_2_Template,2,1,"ng-container",38),core.qZA(),core.TgZ(3,"td",37),core.YNc(4,CustomerListComponent_div_22_tr_8_ng_container_4_ng_container_4_Template,2,1,"ng-container",38),core.qZA(),core.BQk()),2&rf){const ctx_r39=core.oxw(3);core.xp6(2),core.Q6J("ngForOf",null==ctx_r39.customerListConfig?null:ctx_r39.customerListConfig.columns),core.xp6(2),core.Q6J("ngForOf",null==ctx_r39.customerListConfig?null:ctx_r39.customerListConfig.columns)}}function CustomerListComponent_div_22_tr_8_td_6_ng_container_1_1_ng_template_0_Template(rf,ctx){}function CustomerListComponent_div_22_tr_8_td_6_ng_container_1_1_Template(rf,ctx){1&rf&&core.YNc(0,CustomerListComponent_div_22_tr_8_td_6_ng_container_1_1_ng_template_0_Template,0,0,"ng-template")}function CustomerListComponent_div_22_tr_8_td_6_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,CustomerListComponent_div_22_tr_8_td_6_ng_container_1_1_Template,1,0,null,19),core.BQk()),2&rf){const column_r64=ctx.$implicit,customerEntry_r36=core.oxw(2).$implicit;core.oxw(2);const _r7=core.MAs(25);core.xp6(1),core.Q6J("ngTemplateOutlet",_r7)("ngTemplateOutletContext",core.WLB(2,_c7,customerEntry_r36,column_r64))}}function CustomerListComponent_div_22_tr_8_td_6_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"td",37),core.YNc(1,CustomerListComponent_div_22_tr_8_td_6_ng_container_1_Template,2,5,"ng-container",38),core.qZA()),2&rf){const ctx_r40=core.oxw(3);core.xp6(1),core.Q6J("ngForOf",null==ctx_r40.customerListConfig?null:ctx_r40.customerListConfig.columns)}}function CustomerListComponent_div_22_tr_8_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"tr",26),core.YNc(1,CustomerListComponent_div_22_tr_8_td_1_Template,3,1,"td",31),core.YNc(2,CustomerListComponent_div_22_tr_8_ng_container_2_Template,2,1,"ng-container",11),core.ALo(3,"async"),core.YNc(4,CustomerListComponent_div_22_tr_8_ng_container_4_Template,5,2,"ng-container",11),core.ALo(5,"async"),core.YNc(6,CustomerListComponent_div_22_tr_8_td_6_Template,2,1,"td",32),core.ALo(7,"async"),core.qZA()),2&rf){const ctx_r29=core.oxw(2);core.xp6(1),core.Q6J("ngIf",null==ctx_r29.customerListConfig?null:ctx_r29.customerListConfig.showAvatar),core.xp6(1),core.Q6J("ngIf",core.lcZ(3,4,ctx_r29.breakpoint$)===ctx_r29.BREAKPOINT.md),core.xp6(2),core.Q6J("ngIf",core.lcZ(5,6,ctx_r29.breakpoint$)===ctx_r29.BREAKPOINT.sm),core.xp6(2),core.Q6J("ngIf",core.lcZ(7,8,ctx_r29.breakpoint$)===ctx_r29.BREAKPOINT.xs)}}function CustomerListComponent_div_22_div_9_Template(rf,ctx){1&rf&&(core.TgZ(0,"div",39),core._uU(1),core.ALo(2,"cxTranslate"),core.qZA()),2&rf&&(core.xp6(1),core.hij(" ",core.lcZ(2,1,"asm.customerList.noCustomers")," "))}function CustomerListComponent_div_22_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div")(1,"table",22)(2,"caption",23),core._uU(3),core.ALo(4,"cxTranslate"),core.qZA(),core.YNc(5,CustomerListComponent_div_22_thead_5_Template,4,2,"thead",11),core.ALo(6,"async"),core.TgZ(7,"tbody"),core.YNc(8,CustomerListComponent_div_22_tr_8_Template,8,10,"tr",24),core.qZA()(),core.YNc(9,CustomerListComponent_div_22_div_9_Template,3,3,"div",25),core.qZA()),2&rf){const customerSearchPage_r27=ctx.ngIf,ctx_r6=core.oxw();core.xp6(3),core.hij(" ",core.lcZ(4,4,"asm.customerList.title")," "),core.xp6(2),core.Q6J("ngIf",core.lcZ(6,6,ctx_r6.breakpoint$)===ctx_r6.BREAKPOINT.md),core.xp6(3),core.Q6J("ngForOf",null==customerSearchPage_r27?null:customerSearchPage_r27.entries),core.xp6(1),core.Q6J("ngIf",!(null!=customerSearchPage_r27&&customerSearchPage_r27.entries.length))}}function CustomerListComponent_ng_template_24_span_1_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"span",43),core._uU(1),core.ALo(2,"cxTranslate"),core.qZA()),2&rf){const column_r69=core.oxw().column;core.xp6(1),core.hij(" ",core.lcZ(2,1,column_r69.headerLocalizationKey)," ")}}function CustomerListComponent_ng_template_24_ng_container_2_ng_container_1_Template(rf,ctx){1&rf&&core.GkF(0)}__name(CustomerListComponent_div_22_tr_8_ng_container_4_ng_container_2_ng_container_1_Template,"CustomerListComponent_div_22_tr_8_ng_container_4_ng_container_2_ng_container_1_Template"),__name(CustomerListComponent_div_22_tr_8_ng_container_4_ng_container_2_Template,"CustomerListComponent_div_22_tr_8_ng_container_4_ng_container_2_Template"),__name(CustomerListComponent_div_22_tr_8_ng_container_4_ng_container_4_ng_container_1_1_ng_template_0_Template,"CustomerListComponent_div_22_tr_8_ng_container_4_ng_container_4_ng_container_1_1_ng_template_0_Template"),__name(CustomerListComponent_div_22_tr_8_ng_container_4_ng_container_4_ng_container_1_1_Template,"CustomerListComponent_div_22_tr_8_ng_container_4_ng_container_4_ng_container_1_1_Template"),__name(CustomerListComponent_div_22_tr_8_ng_container_4_ng_container_4_ng_container_1_Template,"CustomerListComponent_div_22_tr_8_ng_container_4_ng_container_4_ng_container_1_Template"),__name(CustomerListComponent_div_22_tr_8_ng_container_4_ng_container_4_Template,"CustomerListComponent_div_22_tr_8_ng_container_4_ng_container_4_Template"),__name(CustomerListComponent_div_22_tr_8_ng_container_4_Template,"CustomerListComponent_div_22_tr_8_ng_container_4_Template"),__name(CustomerListComponent_div_22_tr_8_td_6_ng_container_1_1_ng_template_0_Template,"CustomerListComponent_div_22_tr_8_td_6_ng_container_1_1_ng_template_0_Template"),__name(CustomerListComponent_div_22_tr_8_td_6_ng_container_1_1_Template,"CustomerListComponent_div_22_tr_8_td_6_ng_container_1_1_Template"),__name(CustomerListComponent_div_22_tr_8_td_6_ng_container_1_Template,"CustomerListComponent_div_22_tr_8_td_6_ng_container_1_Template"),__name(CustomerListComponent_div_22_tr_8_td_6_Template,"CustomerListComponent_div_22_tr_8_td_6_Template"),__name(CustomerListComponent_div_22_tr_8_Template,"CustomerListComponent_div_22_tr_8_Template"),__name(CustomerListComponent_div_22_div_9_Template,"CustomerListComponent_div_22_div_9_Template"),__name(CustomerListComponent_div_22_Template,"CustomerListComponent_div_22_Template"),__name(CustomerListComponent_ng_template_24_span_1_Template,"CustomerListComponent_ng_template_24_span_1_Template"),__name(CustomerListComponent_ng_template_24_ng_container_2_ng_container_1_Template,"CustomerListComponent_ng_template_24_ng_container_2_ng_container_1_Template");const _c8=__name(function(a0,a1){return{column:a0,customerEntry:a1}},"_c8");function CustomerListComponent_ng_template_24_ng_container_2_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,CustomerListComponent_ng_template_24_ng_container_2_ng_container_1_Template,1,0,"ng-container",19),core.BQk()),2&rf){const ctx_r76=core.oxw(),column_r69=ctx_r76.column,customerEntry_r68=ctx_r76.customerEntry;core.oxw();const _r9=core.MAs(27);core.xp6(1),core.Q6J("ngTemplateOutlet",_r9)("ngTemplateOutletContext",core.WLB(2,_c8,column_r69,customerEntry_r68))}}function CustomerListComponent_ng_template_24_button_3_ng_container_3_Template(rf,ctx){1&rf&&core.GkF(0)}function CustomerListComponent_ng_template_24_button_3_Template(rf,ctx){if(1&rf){const _r80=core.EpF();core.TgZ(0,"button",44),core.NdJ("click",__name(function(){core.CHM(_r80);const ctx_r79=core.oxw(),customerEntry_r68=ctx_r79.customerEntry,column_r69=ctx_r79.column,ctx_r78=core.oxw();return core.KtG(ctx_r78.startColumnAction(customerEntry_r68,column_r69.actionType))},"CustomerListComponent_ng_template_24_button_3_Template_button_click_0_listener")),core.ALo(1,"cxTranslate"),core.ALo(2,"cxTranslate"),core.YNc(3,CustomerListComponent_ng_template_24_button_3_ng_container_3_Template,1,0,"ng-container",19),core.qZA()}if(2&rf){const ctx_r81=core.oxw(),column_r69=ctx_r81.column,customerEntry_r68=ctx_r81.customerEntry;core.oxw();const _r9=core.MAs(27);let tmp_0_0,tmp_1_0;core.uIk("title",column_r69.icon?core.lcZ(1,4,null!==(tmp_0_0=column_r69.icon.captionLocalizationKey)&&void 0!==tmp_0_0?tmp_0_0:column_r69.headerLocalizationKey):void 0)("aria-label",column_r69.icon?core.lcZ(2,6,null!==(tmp_1_0=column_r69.icon.captionLocalizationKey)&&void 0!==tmp_1_0?tmp_1_0:column_r69.headerLocalizationKey):void 0),core.xp6(3),core.Q6J("ngTemplateOutlet",_r9)("ngTemplateOutletContext",core.WLB(8,_c8,column_r69,customerEntry_r68))}}function CustomerListComponent_ng_template_24_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",40),core.YNc(1,CustomerListComponent_ng_template_24_span_1_Template,3,3,"span",41),core.YNc(2,CustomerListComponent_ng_template_24_ng_container_2_Template,2,5,"ng-container",11),core.YNc(3,CustomerListComponent_ng_template_24_button_3_Template,4,11,"button",42),core.qZA()),2&rf){const column_r69=ctx.column,showHeader_r70=ctx.showHeader;core.xp6(1),core.Q6J("ngIf",showHeader_r70),core.xp6(1),core.Q6J("ngIf",!column_r69.actionType),core.xp6(1),core.Q6J("ngIf",column_r69.actionType)}}function CustomerListComponent_ng_template_26_span_0_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"span"),core._uU(1),core.qZA()),2&rf){const ctx_r86=core.oxw(),column_r83=ctx_r86.column,customerEntry_r82=ctx_r86.customerEntry;core.xp6(1),core.Oqu((null==column_r83.renderer?null:column_r83.renderer(customerEntry_r82))||"")}}function CustomerListComponent_ng_template_26_cx_icon_1_Template(rf,ctx){if(1&rf&&(core._UZ(0,"cx-icon",46),core.ALo(1,"cxTranslate"),core.ALo(2,"cxTranslate")),2&rf){const column_r83=core.oxw().column;let tmp_2_0,tmp_3_0;core.ekj("cx-action-color",column_r83.actionType),core.Q6J("type",column_r83.icon.symbol),core.uIk("title",column_r83.actionType?void 0:core.lcZ(1,5,null!==(tmp_2_0=column_r83.icon.captionLocalizationKey)&&void 0!==tmp_2_0?tmp_2_0:column_r83.headerLocalizationKey))("aria-label",column_r83.actionType?void 0:core.lcZ(2,7,null!==(tmp_3_0=column_r83.icon.captionLocalizationKey)&&void 0!==tmp_3_0?tmp_3_0:column_r83.headerLocalizationKey))}}function CustomerListComponent_ng_template_26_Template(rf,ctx){if(1&rf&&(core.YNc(0,CustomerListComponent_ng_template_26_span_0_Template,2,1,"span",11),core.YNc(1,CustomerListComponent_ng_template_26_cx_icon_1_Template,3,9,"cx-icon",45)),2&rf){const column_r83=ctx.column;core.Q6J("ngIf",!column_r83.icon),core.xp6(1),core.Q6J("ngIf",column_r83.icon)}}__name(CustomerListComponent_ng_template_24_ng_container_2_Template,"CustomerListComponent_ng_template_24_ng_container_2_Template"),__name(CustomerListComponent_ng_template_24_button_3_ng_container_3_Template,"CustomerListComponent_ng_template_24_button_3_ng_container_3_Template"),__name(CustomerListComponent_ng_template_24_button_3_Template,"CustomerListComponent_ng_template_24_button_3_Template"),__name(CustomerListComponent_ng_template_24_Template,"CustomerListComponent_ng_template_24_Template"),__name(CustomerListComponent_ng_template_26_span_0_Template,"CustomerListComponent_ng_template_26_span_0_Template"),__name(CustomerListComponent_ng_template_26_cx_icon_1_Template,"CustomerListComponent_ng_template_26_cx_icon_1_Template"),__name(CustomerListComponent_ng_template_26_Template,"CustomerListComponent_ng_template_26_Template");const _c9=__name(function(a0){return{ariaLabel:a0,ariaControls:"asm-cusomer-list-table"}},"_c9");function CustomerListComponent_ng_template_28_Template(rf,ctx){if(1&rf){const _r89=core.EpF();core.TgZ(0,"label")(1,"span",23),core._uU(2),core.ALo(3,"cxTranslate"),core.qZA(),core.TgZ(4,"cx-sorting",47),core.NdJ("sortListEvent",__name(function($event){core.CHM(_r89);const ctx_r88=core.oxw();return core.KtG(ctx_r88.changeSortCode($event))},"CustomerListComponent_ng_template_28_Template_cx_sorting_sortListEvent_4_listener")),core.ALo(5,"async"),core.ALo(6,"cxTranslate"),core.qZA()()}if(2&rf){const ctx_r12=core.oxw();core.xp6(2),core.Oqu(core.lcZ(3,6,"asm.customerList.tableSort.sortBy")),core.xp6(2),core.s9C("placeholder",core.lcZ(6,10,"asm.customerList.tableSort.sortBy")),core.Q6J("sortOptions",ctx_r12.sorts)("sortLabels",core.lcZ(5,8,ctx_r12.getSortLabels()))("selectedOption",ctx_r12.sortCode)("cxNgSelectA11y",core.VKq(12,_c9,ctx_r12.sortCode))}}function CustomerListComponent_ng_template_30_button_4_Template(rf,ctx){if(1&rf){const _r93=core.EpF();core.TgZ(0,"button",51),core.NdJ("click",__name(function(){core.CHM(_r93);const ctx_r92=core.oxw(2);return core.KtG(ctx_r92.goToPreviousPage())},"CustomerListComponent_ng_template_30_button_4_Template_button_click_0_listener")),core._UZ(1,"cx-icon",52),core.TgZ(2,"span"),core._uU(3),core.ALo(4,"cxTranslate"),core.qZA()()}if(2&rf){const ctx_r90=core.oxw(2);core.Q6J("disabled",0===ctx_r90.currentPage||!ctx_r90.loaded),core.xp6(1),core.Q6J("type",ctx_r90.iconTypes.CARET_LEFT),core.xp6(2),core.Oqu(core.lcZ(4,3,"asm.customerList.page.previous"))}}function CustomerListComponent_ng_template_30_button_5_Template(rf,ctx){if(1&rf){const _r95=core.EpF();core.TgZ(0,"button",53),core.NdJ("click",__name(function(){core.CHM(_r95);const ctx_r94=core.oxw(2);return core.KtG(ctx_r94.goToNextPage())},"CustomerListComponent_ng_template_30_button_5_Template_button_click_0_listener")),core.TgZ(1,"span"),core._uU(2),core.ALo(3,"cxTranslate"),core.qZA(),core._UZ(4,"cx-icon",54),core.qZA()}if(2&rf){const ctx_r91=core.oxw(2);core.Q6J("disabled",ctx_r91.currentPage===ctx_r91.maxPage||!ctx_r91.loaded),core.xp6(2),core.Oqu(core.lcZ(3,3,"asm.customerList.page.next")),core.xp6(2),core.Q6J("type",ctx_r91.iconTypes.CARET_RIGHT)}}__name(CustomerListComponent_ng_template_28_Template,"CustomerListComponent_ng_template_28_Template"),__name(CustomerListComponent_ng_template_30_button_4_Template,"CustomerListComponent_ng_template_30_button_4_Template"),__name(CustomerListComponent_ng_template_30_button_5_Template,"CustomerListComponent_ng_template_30_button_5_Template");const _c10=__name(function(a0){return{count:a0}},"_c10");function CustomerListComponent_ng_template_30_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",48)(1,"div"),core._uU(2),core.ALo(3,"cxTranslate"),core.qZA(),core.YNc(4,CustomerListComponent_ng_template_30_button_4_Template,5,5,"button",49),core.YNc(5,CustomerListComponent_ng_template_30_button_5_Template,5,5,"button",50),core.qZA()),2&rf){const ctx_r14=core.oxw();core.xp6(2),core.hij(" ",core.xi3(3,3,"asm.customerList.page.page",core.VKq(6,_c10,ctx_r14.currentPage+1))," "),core.xp6(2),core.Q6J("ngIf",ctx_r14.maxPage>0),core.xp6(1),core.Q6J("ngIf",ctx_r14.maxPage>0)}}function CustomerListComponent_ng_template_32_Template(rf,ctx){if(1&rf){const _r98=core.EpF();core.TgZ(0,"label")(1,"span",23),core._uU(2),core.ALo(3,"cxTranslate"),core.qZA(),core.TgZ(4,"ng-select",55),core.NdJ("change",__name(function(){core.CHM(_r98);const ctx_r97=core.oxw();return core.KtG(ctx_r97.onChangeCustomerGroup())},"CustomerListComponent_ng_template_32_Template_ng_select_change_4_listener"))("ngModelChange",__name(function($event){core.CHM(_r98);const ctx_r99=core.oxw();return core.KtG(ctx_r99.selectedUserGroupId=$event)},"CustomerListComponent_ng_template_32_Template_ng_select_ngModelChange_4_listener")),core.qZA()()}if(2&rf){const customerListsPage_r96=ctx.customerListsPage,ctx_r16=core.oxw();core.xp6(2),core.Oqu(core.lcZ(3,7,"asm.customerList.title")),core.xp6(2),core.Q6J("searchable",!1)("clearable",!1)("tabIndex",0)("ngModel",ctx_r16.selectedUserGroupId)("items",null==customerListsPage_r96?null:customerListsPage_r96.userGroups)("cxNgSelectA11y",core.VKq(9,_c9,ctx_r16.getGroupName(customerListsPage_r96,ctx_r16.selectedUserGroupId)))}}function CustomerListComponent_ng_template_34_Template(rf,ctx){if(1&rf){const _r101=core.EpF();core.TgZ(0,"button",56),core.NdJ("click",__name(function(){core.CHM(_r101);const ctx_r100=core.oxw();return core.KtG(ctx_r100.closeModal("Cross click"))},"CustomerListComponent_ng_template_34_Template_button_click_0_listener")),core.ALo(1,"cxTranslate"),core.TgZ(2,"span",57),core._UZ(3,"cx-icon",46),core.qZA()()}if(2&rf){const ctx_r18=core.oxw();core.uIk("aria-label",core.lcZ(1,2,"common.close")),core.xp6(3),core.Q6J("type",ctx_r18.iconTypes.CLOSE)}}var BIND_CART_DIALOG_ACTION,BIND_CART_DIALOG_ACTION2;__name(CustomerListComponent_ng_template_30_Template,"CustomerListComponent_ng_template_30_Template"),__name(CustomerListComponent_ng_template_32_Template,"CustomerListComponent_ng_template_32_Template"),__name(CustomerListComponent_ng_template_34_Template,"CustomerListComponent_ng_template_34_Template"),(BIND_CART_DIALOG_ACTION2=BIND_CART_DIALOG_ACTION||(BIND_CART_DIALOG_ACTION={})).CANCEL="CANCEL",BIND_CART_DIALOG_ACTION2.REPLACE="REPLACE";class AsmBindCartDialogComponent{constructor(launchDialogService){this.launchDialogService=launchDialogService,this.BIND_CART_ACTION=BIND_CART_DIALOG_ACTION,this.focusConfig={trap:!0,block:!0,autofocus:!0,focusOnEscape:!0}}closeModal(reason){this.launchDialogService.closeDialog(reason)}}__name(AsmBindCartDialogComponent,"AsmBindCartDialogComponent"),AsmBindCartDialogComponent.\u0275fac=__name(function(t){return new(t||AsmBindCartDialogComponent)(core.Y36(spartacus_storefront.Q3W))},"AsmBindCartDialogComponent_Factory"),AsmBindCartDialogComponent.\u0275cmp=core.Xpm({type:AsmBindCartDialogComponent,selectors:[["cx-asm-bind-cart-dialog"]],decls:20,vars:19,consts:[[1,"cx-asm-bind-cart-dialog","cx-modal-container","cx-asm-dialog",3,"cxFocus","esc"],[1,"cx-modal-content"],[1,"cx-dialog-header","modal-header"],["id","asm-bind-cart-dialog-title",1,"title","modal-title"],[1,"cx-dialog-body","modal-body"],[1,"cx-dialog-row"],[1,"cx-dialog-item"],[1,"cx-dialog-footer","modal-footer"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-secondary",3,"click"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"div",0),core.NdJ("esc",__name(function(){return ctx.closeModal(ctx.BIND_CART_ACTION.CANCEL)},"AsmBindCartDialogComponent_Template_div_esc_0_listener")),core.TgZ(1,"div",1)(2,"div",2)(3,"h2",3),core._uU(4),core.ALo(5,"cxTranslate"),core.qZA()(),core.TgZ(6,"div",4)(7,"div",5)(8,"div",6),core._uU(9),core.ALo(10,"cxTranslate"),core.qZA()()(),core.TgZ(11,"div",7)(12,"button",8),core.NdJ("click",__name(function(){return ctx.closeModal(ctx.BIND_CART_ACTION.REPLACE)},"AsmBindCartDialogComponent_Template_button_click_12_listener")),core.ALo(13,"cxTranslate"),core._uU(14),core.ALo(15,"cxTranslate"),core.qZA(),core.TgZ(16,"button",9),core.NdJ("click",__name(function(){return ctx.closeModal(ctx.BIND_CART_ACTION.CANCEL)},"AsmBindCartDialogComponent_Template_button_click_16_listener")),core.ALo(17,"cxTranslate"),core._uU(18),core.ALo(19,"cxTranslate"),core.qZA()()()()),2&rf&&(core.Q6J("cxFocus",ctx.focusConfig),core.xp6(4),core.hij(" ",core.lcZ(5,7,"asm.bindCart.dialog.title")," "),core.xp6(5),core.hij(" ",core.lcZ(10,9,"asm.bindCart.dialog.body")," "),core.xp6(3),core.uIk("aria-label",core.lcZ(13,11,"asm.bindCart.dialog.actions.replace")),core.xp6(2),core.hij(" ",core.lcZ(15,13,"asm.bindCart.dialog.actions.replace")," "),core.xp6(2),core.uIk("aria-label",core.lcZ(17,15,"common.cancel")),core.xp6(2),core.hij(" ",core.lcZ(19,17,"common.cancel")," "))},"AsmBindCartDialogComponent_Template"),dependencies:[spartacus_storefront.RRe,spartacus_core.X$D],encapsulation:2});class DotSpinnerComponent{}__name(DotSpinnerComponent,"DotSpinnerComponent"),DotSpinnerComponent.\u0275fac=__name(function(t){return new(t||DotSpinnerComponent)},"DotSpinnerComponent_Factory"),DotSpinnerComponent.\u0275cmp=core.Xpm({type:DotSpinnerComponent,selectors:[["cx-dot-spinner"]],decls:3,vars:0,template:__name(function(rf,ctx){1&rf&&core._UZ(0,"div")(1,"div")(2,"div")},"DotSpinnerComponent_Template"),encapsulation:2,changeDetection:0});class AsmBindCartComponent{constructor(globalMessageService,activeCartFacade,multiCartFacade,asmBindCartFacade,launchDialogService,savedCartFacade){this.globalMessageService=globalMessageService,this.activeCartFacade=activeCartFacade,this.multiCartFacade=multiCartFacade,this.asmBindCartFacade=asmBindCartFacade,this.launchDialogService=launchDialogService,this.savedCartFacade=savedCartFacade,this.activeCartValidator=control=>control.value===this.activeCartId?{activeCartError:!0}:null,this.cartId=new fesm2020_forms.NI("",[fesm2020_forms.kI.required,fesm2020_forms.kI.minLength(1),this.activeCartValidator]),this.loading$=new BehaviorSubject.X(!1),this.valid$=this.cartId.statusChanges.pipe((0,map.U)(status=>"VALID"===status),(0,shareReplay.d)(1)),this.activeCartId="",this.subscription=new Subscription.w}ngOnInit(){this.subscription.add(this.activeCartFacade.getActiveCartId().subscribe(response=>{this.activeCartId=response??"",this.cartId.setValue(this.activeCartId)}))}resetInput(){this.cartId.value||this.cartId.setValue(this.activeCartId)}bindCartToCustomer(){const anonymousCartId=this.cartId.value,subscription=(0,combineLatest.aj)([this.loading$.asObservable(),this.valid$]).pipe((0,take.q)(1),(0,filter.h)(([loading,valid])=>!loading&&valid),(0,tap.b)(()=>this.loading$.next(!0)),(0,concatMap.b)(()=>this.activeCartFacade.getActive().pipe((0,map.U)(cart=>cart.deliveryItemsQuantity??0),(0,take.q)(1))),(0,concatMap.b)(cartItemCount=>(0,iif.s)(()=>Boolean(this.activeCartId&&cartItemCount),this.openDialog(this.activeCartId,anonymousCartId),this.simpleBindCart(anonymousCartId))),(0,finalize.x)(()=>this.loading$.next(!1))).subscribe(()=>{this.globalMessageService.add({key:"asm.bindCart.success"},spartacus_core.xUg.MSG_TYPE_CONFIRMATION)},error=>{this.globalMessageService.add(error.details?.[0].message??"",spartacus_core.xUg.MSG_TYPE_ERROR)});this.subscription.add(subscription)}clearText(){this.cartId.setValue("")}ngOnDestroy(){this.subscription.unsubscribe()}simpleBindCart(anonymousCartId){return(0,defer.P)(()=>this.asmBindCartFacade.bindCart(anonymousCartId)).pipe((0,tap.b)(()=>this.multiCartFacade.reloadCart(spartacus_core.gSv)))}openDialog(activeCartId,anonymousCartId){return(0,defer.P)(()=>(this.launchDialogService.openDialogAndSubscribe("ASM_BIND_CART",this.bindToCartElemRef),this.launchDialogService.dialogClose.pipe((0,filter.h)(result=>Boolean(result)),(0,take.q)(1)))).pipe((0,filter.h)(dialogResult=>Boolean(dialogResult)),(0,concatMap.b)(dialogResult=>this.selectBindAction(activeCartId,anonymousCartId,dialogResult)))}selectBindAction(activeCartId,anonymousCartId,action){switch(action){case BIND_CART_DIALOG_ACTION.REPLACE:return this.replaceCart(activeCartId,anonymousCartId);case BIND_CART_DIALOG_ACTION.CANCEL:default:return empty.E}}replaceCart(previousActiveCartId,anonymousCartId){return this.simpleBindCart(anonymousCartId).pipe((0,tap.b)(()=>{this.savedCartFacade.saveCart({cartId:previousActiveCartId,saveCartName:previousActiveCartId,saveCartDescription:"-"})}))}}__name(AsmBindCartComponent,"AsmBindCartComponent"),AsmBindCartComponent.\u0275fac=__name(function(t){return new(t||AsmBindCartComponent)(core.Y36(spartacus_core.IWp),core.Y36(spartacus_cart_base_root.bu),core.Y36(spartacus_cart_base_root.WT),core.Y36(spartacus_asm_root.AE),core.Y36(spartacus_storefront.Q3W),core.Y36(spartacus_cart_saved_cart_root.aD))},"AsmBindCartComponent_Factory"),AsmBindCartComponent.\u0275cmp=core.Xpm({type:AsmBindCartComponent,selectors:[["cx-asm-bind-cart"]],viewQuery:__name(function(rf,ctx){if(1&rf&&core.Gf(_c0,5),2&rf){let _t;core.iGM(_t=core.CRH())&&(ctx.bindToCartElemRef=_t.first)}},"AsmBindCartComponent_Query"),decls:25,vars:42,consts:[[3,"submit"],["for","cartNumber"],["role","search",1,"cx-asm-assignCart",3,"click"],["autocomplete","off","formcontrolname","cartNumber",3,"formControl","keydown.enter","blur"],["cartIdElement",""],[1,"cx-asm-reset",3,"click"],[1,"cx-icon","fas","fa-times-circle"],["type","submit",1,"cx-asm-bindCartToCustomer",3,"disabled"],["bindToCart",""]],template:__name(function(rf,ctx){if(1&rf){const _r2=core.EpF();core.TgZ(0,"form",0),core.NdJ("submit",__name(function(){return ctx.bindCartToCustomer()},"AsmBindCartComponent_Template_form_submit_0_listener")),core.TgZ(1,"label",1),core._uU(2),core.ALo(3,"cxTranslate"),core.qZA(),core.TgZ(4,"div",2),core.NdJ("click",__name(function(){core.CHM(_r2);const _r0=core.MAs(8);return core.KtG(_r0.focus())},"AsmBindCartComponent_Template_div_click_4_listener")),core.ALo(5,"async"),core.ALo(6,"cxTranslate"),core.TgZ(7,"input",3,4),core.NdJ("keydown.enter",__name(function(){return ctx.bindCartToCustomer()},"AsmBindCartComponent_Template_input_keydown_enter_7_listener"))("blur",__name(function(){return ctx.resetInput()},"AsmBindCartComponent_Template_input_blur_7_listener")),core.ALo(9,"cxTranslate"),core.qZA(),core.TgZ(10,"button",5),core.NdJ("click",__name(function(){return ctx.clearText()},"AsmBindCartComponent_Template_button_click_10_listener")),core.ALo(11,"cxTranslate"),core._UZ(12,"cx-icon",6),core.qZA()(),core.TgZ(13,"button",7,8),core.ALo(15,"async"),core.ALo(16,"async"),core.ALo(17,"async"),core.TgZ(18,"span"),core.ALo(19,"async"),core._uU(20),core.ALo(21,"cxTranslate"),core.qZA(),core._UZ(22,"cx-dot-spinner"),core.ALo(23,"async"),core.ALo(24,"cxTranslate"),core.qZA()()}2&rf&&(core.xp6(2),core.hij("",core.lcZ(3,18,"asm.bindCart.cartNumber")," "),core.xp6(2),core.ekj("active",core.lcZ(5,20,ctx.valid$)),core.uIk("aria-label",core.lcZ(6,22,"asm.bindCart.assignCartId")),core.xp6(3),core.Q6J("formControl",ctx.cartId),core.uIk("aria-label",core.lcZ(9,24,"asm.bindCart.enterCartId")),core.xp6(3),core.ekj("visible",(null==ctx.cartId.value?null:ctx.cartId.value.length)>0),core.uIk("aria-label",core.lcZ(11,26,"asm.bindCart.resetCartId")),core.xp6(3),core.ekj("cx-asm-active",core.lcZ(15,28,ctx.valid$))("cx-bind-loading",core.lcZ(16,30,ctx.loading$)),core.Q6J("disabled",!core.lcZ(17,32,ctx.valid$)),core.xp6(5),core.uIk("aria-hidden",core.lcZ(19,34,ctx.loading$)),core.xp6(2),core.hij(" ",core.lcZ(21,36,"asm.bindCart.bindCartToCustomer")," "),core.xp6(2),core.uIk("aria-hidden",!core.lcZ(23,38,ctx.loading$))("aria-label",core.lcZ(24,40,"common.loading")))},"AsmBindCartComponent_Template"),dependencies:[fesm2020_forms._Y,fesm2020_forms.Fj,fesm2020_forms.JJ,fesm2020_forms.JL,fesm2020_forms.oH,spartacus_storefront.oJW,fesm2020_forms.F,DotSpinnerComponent,common.Ov,spartacus_core.X$D],encapsulation:2,changeDetection:0});class AsmComponentService{constructor(authService,csAgentAuthService,winRef){this.authService=authService,this.csAgentAuthService=csAgentAuthService,this.winRef=winRef}logoutCustomerSupportAgentAndCustomer(){this.csAgentAuthService.logoutCustomerSupportAgent()}logoutCustomer(){this.authService.logout()}isCustomerEmulationSessionInProgress(){return this.csAgentAuthService.isCustomerEmulated()}unload(){this.winRef.localStorage&&this.winRef.localStorage.removeItem(spartacus_asm_root.AJ)}}__name(AsmComponentService,"AsmComponentService"),AsmComponentService.\u0275fac=__name(function(t){return new(t||AsmComponentService)(core.LFG(spartacus_core.e80),core.LFG(spartacus_asm_root.FA),core.LFG(spartacus_core.X9E))},"AsmComponentService_Factory"),AsmComponentService.\u0275prov=core.Yz7({token:AsmComponentService,factory:AsmComponentService.\u0275fac,providedIn:"root"});class CSAgentLoginFormComponent{constructor(fb){this.fb=fb,this.csAgentTokenLoading=!1,this.submitEvent=new core.vpe}ngOnInit(){this.csAgentLoginForm=this.fb.group({userId:["",[fesm2020_forms.kI.required]],password:["",[fesm2020_forms.kI.required]]})}onSubmit(){this.csAgentLoginForm.valid?this.submitEvent.emit({userId:this.csAgentLoginForm.get("userId")?.value,password:this.csAgentLoginForm.get("password")?.value}):this.csAgentLoginForm.markAllAsTouched()}}__name(CSAgentLoginFormComponent,"CSAgentLoginFormComponent"),CSAgentLoginFormComponent.\u0275fac=__name(function(t){return new(t||CSAgentLoginFormComponent)(core.Y36(fesm2020_forms.QS))},"CSAgentLoginFormComponent_Factory"),CSAgentLoginFormComponent.\u0275cmp=core.Xpm({type:CSAgentLoginFormComponent,selectors:[["cx-csagent-login-form"]],inputs:{csAgentTokenLoading:"csAgentTokenLoading"},outputs:{submitEvent:"submitEvent"},decls:2,vars:2,consts:[[3,"formGroup","ngSubmit",4,"ngIf"],["aria-hidden","false",4,"ngIf"],[3,"formGroup","ngSubmit"],["required","true","type","text","formControlName","userId",3,"placeholder"],[3,"control"],["required","true","type","password","formControlName","password","cxPasswordVisibilitySwitch","",3,"placeholder"],["type","submit"],["aria-hidden","false"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,CSAgentLoginFormComponent_form_0_Template,14,18,"form",0),core.YNc(1,CSAgentLoginFormComponent_cx_dot_spinner_1_Template,2,3,"cx-dot-spinner",1)),2&rf&&(core.Q6J("ngIf",!ctx.csAgentTokenLoading),core.xp6(1),core.Q6J("ngIf",ctx.csAgentTokenLoading))},"CSAgentLoginFormComponent_Template"),dependencies:[common.O5,fesm2020_forms._Y,fesm2020_forms.Fj,fesm2020_forms.JJ,fesm2020_forms.JL,fesm2020_forms.Q7,fesm2020_forms.sg,fesm2020_forms.u,spartacus_storefront.Ahv,spartacus_storefront.X84,DotSpinnerComponent,spartacus_core.X$D],encapsulation:2});class CustomerSelectionComponent{constructor(fb,asmService,config,directionService){this.fb=fb,this.asmService=asmService,this.config=config,this.directionService=directionService,this.subscription=new Subscription.w,this.submitEvent=new core.vpe,this.activeFocusedButtonIndex=-1}ngOnInit(){this.customerSelectionForm=this.fb.group({searchTerm:["",fesm2020_forms.kI.required]}),this.asmService.customerSearchReset(),this.searchResultsLoading$=this.asmService.getCustomerSearchResultsLoading(),this.searchResults=this.asmService.getCustomerSearchResults(),this.subscription.add(this.customerSelectionForm.controls.searchTerm.valueChanges.pipe((0,debounceTime.b)(300)).subscribe(searchTermValue=>{this.handleSearchTerm(searchTermValue)}))}handleSearchTerm(searchTermValue){this.selectedCustomer&&searchTermValue!==this.selectedCustomer.name&&(this.selectedCustomer=void 0),!Boolean(this.selectedCustomer)&&(this.asmService.customerSearchReset(),this.activeFocusedButtonIndex=-1,searchTermValue.trim().length>=3&&this.asmService.customerSearch({query:searchTermValue,pageSize:this.config.asm?.customerSearch?.maxResults}))}selectCustomerFromList(event,customer){this.selectedCustomer=customer,this.customerSelectionForm.controls.searchTerm.setValue(this.selectedCustomer.name),this.asmService.customerSearchReset(),this.searchTerm.nativeElement.focus(),event.preventDefault(),event.stopPropagation()}onSubmit(){this.customerSelectionForm.valid&&this.selectedCustomer?this.submitEvent.emit({customerId:this.selectedCustomer.customerId}):this.customerSelectionForm.markAllAsTouched()}onDocumentClick(event){if(Boolean(this.resultList)){if(this.resultList.nativeElement.contains(event.target)||this.searchTerm.nativeElement.contains(event.target))return;this.asmService.customerSearchReset()}}closeResults(event){this.asmService.customerSearchReset(),this.searchTerm.nativeElement.focus(),event.preventDefault(),event.stopPropagation()}ngOnDestroy(){this.subscription.unsubscribe(),this.asmService.customerSearchReset()}focusFirstItem(event){event.preventDefault(),this.activeFocusedButtonIndex=0,this.updateItemIndex(this.activeFocusedButtonIndex)}setSelectionEnd(event){if(event.preventDefault(),this.searchTerm.nativeElement.value?.length){const selectionStart=this.searchTerm.nativeElement.value.length;this.searchTerm.nativeElement.selectionStart=selectionStart,this.searchTerm.nativeElement.selectionEnd=selectionStart}}focusPreviousChild(event){event.preventDefault(),this.activeFocusedButtonIndex--,this.activeFocusedButtonIndex<0&&(this.activeFocusedButtonIndex=this.searchResultItems.length-1),this.updateItemIndex(this.activeFocusedButtonIndex)}focusNextChild(event){event.preventDefault(),this.activeFocusedButtonIndex++,this.activeFocusedButtonIndex>this.searchResultItems.length-1&&(this.activeFocusedButtonIndex=0),this.updateItemIndex(this.activeFocusedButtonIndex)}focusInputText(event){if(event.preventDefault(),this.activeFocusedButtonIndex=-1,this.searchTerm.nativeElement.focus(),this.searchTerm.nativeElement.value?.length){let selectionPos=this.searchTerm.nativeElement.selectionEnd;const searchTermLength=this.searchTerm.nativeElement.value.length;this.isBackNavigation(event)?selectionPos=selectionPos<=0?0:selectionPos-1:this.isForwardsNavigation(event)?selectionPos=selectionPos>=searchTermLength?searchTermLength:selectionPos+1:"Home"===event.code?selectionPos=0:"End"===event.code&&(selectionPos=searchTermLength),this.searchTerm.nativeElement.selectionStart=selectionPos,this.searchTerm.nativeElement.selectionEnd=selectionPos}}updateItemIndex(selectedIndex){this.searchResultItems.toArray()?.[selectedIndex]?.nativeElement.focus()}isForwardsNavigation(event){return"ArrowRight"===event.code&&this.isLTRDirection()||"ArrowLeft"===event.code&&this.isRTLDirection()}isBackNavigation(event){return"ArrowLeft"===event.code&&this.isLTRDirection()||"ArrowRight"===event.code&&this.isRTLDirection()}isLTRDirection(){return this.directionService.getDirection()===spartacus_storefront.uEG.LTR}isRTLDirection(){return this.directionService.getDirection()===spartacus_storefront.uEG.RTL}}__name(CustomerSelectionComponent,"CustomerSelectionComponent"),CustomerSelectionComponent.\u0275fac=__name(function(t){return new(t||CustomerSelectionComponent)(core.Y36(fesm2020_forms.QS),core.Y36(AsmService),core.Y36(spartacus_asm_root.hc),core.Y36(spartacus_storefront.Lh6))},"CustomerSelectionComponent_Factory"),CustomerSelectionComponent.\u0275cmp=core.Xpm({type:CustomerSelectionComponent,selectors:[["cx-customer-selection"]],viewQuery:__name(function(rf,ctx){if(1&rf&&(core.Gf(_c1,5),core.Gf(_c2,5),core.Gf(_c3,5)),2&rf){let _t;core.iGM(_t=core.CRH())&&(ctx.resultList=_t.first),core.iGM(_t=core.CRH())&&(ctx.searchTerm=_t.first),core.iGM(_t=core.CRH())&&(ctx.searchResultItems=_t)}},"CustomerSelectionComponent_Query"),hostBindings:__name(function(rf,ctx){1&rf&&core.NdJ("click",__name(function($event){return ctx.onDocumentClick($event)},"CustomerSelectionComponent_click_HostBindingHandler"),!1,core.evT)},"CustomerSelectionComponent_HostBindings"),outputs:{submitEvent:"submitEvent"},decls:14,vars:19,consts:[[3,"formGroup","ngSubmit"],["required","true","type","text","formControlName","searchTerm",3,"placeholder","keydown.arrowdown","keydown.end"],["searchTerm",""],[3,"control"],["type","submit"],["class","asm-results",4,"ngIf"],[1,"asm-results"],["resultList",""],[3,"tabindex","active","keydown.arrowup","keydown.arrowdown","keydown.arrowright","keydown.arrowleft","keydown.enter","keydown.escape","keydown.home","keydown.end","click",4,"ngFor","ngForOf"],[3,"active","click","keydown.enter","keydown.escape","keydown.arrowright","keydown.arrowleft","keydown.home","keydown.end",4,"ngIf"],[3,"tabindex","keydown.arrowup","keydown.arrowdown","keydown.arrowright","keydown.arrowleft","keydown.enter","keydown.escape","keydown.home","keydown.end","click"],["searchResultItem",""],[1,"result-name"],[1,"result-id"],[3,"click","keydown.enter","keydown.escape","keydown.arrowright","keydown.arrowleft","keydown.home","keydown.end"],["aria-hidden","false"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"form",0),core.NdJ("ngSubmit",__name(function(){return ctx.onSubmit()},"CustomerSelectionComponent_Template_form_ngSubmit_0_listener")),core.TgZ(1,"label")(2,"input",1,2),core.NdJ("keydown.arrowdown",__name(function($event){return ctx.focusFirstItem($event)},"CustomerSelectionComponent_Template_input_keydown_arrowdown_2_listener"))("keydown.end",__name(function($event){return ctx.setSelectionEnd($event)},"CustomerSelectionComponent_Template_input_keydown_end_2_listener")),core.ALo(4,"cxTranslate"),core.ALo(5,"cxTranslate"),core.qZA(),core._UZ(6,"cx-form-errors",3),core.qZA(),core.TgZ(7,"button",4),core._uU(8),core.ALo(9,"cxTranslate"),core.qZA()(),core.YNc(10,CustomerSelectionComponent_div_10_Template,5,4,"div",5),core.ALo(11,"async"),core.YNc(12,CustomerSelectionComponent_div_12_Template,3,3,"div",5),core.ALo(13,"async")),2&rf&&(core.Q6J("formGroup",ctx.customerSelectionForm),core.xp6(2),core.s9C("placeholder",core.lcZ(5,11,"asm.customerSearch.searchTerm.label")),core.uIk("aria-label",core.lcZ(4,9,"asm.customerSearch.searchTerm.label")),core.xp6(4),core.Q6J("control",ctx.customerSelectionForm.get("searchTerm")),core.xp6(1),core.ekj("active",ctx.selectedCustomer),core.xp6(1),core.hij(" ",core.lcZ(9,13,"asm.customerSearch.submit")," "),core.xp6(2),core.Q6J("ngIf",core.lcZ(11,15,ctx.searchResults)),core.xp6(2),core.Q6J("ngIf",core.lcZ(13,17,ctx.searchResultsLoading$)))},"CustomerSelectionComponent_Template"),dependencies:[common.sg,common.O5,fesm2020_forms._Y,fesm2020_forms.Fj,fesm2020_forms.JJ,fesm2020_forms.JL,fesm2020_forms.Q7,fesm2020_forms.sg,fesm2020_forms.u,spartacus_storefront.Ahv,DotSpinnerComponent,common.Ov,spartacus_core.X$D],encapsulation:2});class FormatTimerPipe{transform(totalSeconds){totalSeconds<0&&(totalSeconds=0);const minutes=Math.floor(totalSeconds/60),seconds=totalSeconds%60;let zeroPaddedMinutes;zeroPaddedMinutes=minutes<10?("00"+minutes).slice(-2):minutes+"";return`${zeroPaddedMinutes}:${("00"+seconds).slice(-2)}`}}__name(FormatTimerPipe,"FormatTimerPipe"),FormatTimerPipe.\u0275fac=__name(function(t){return new(t||FormatTimerPipe)},"FormatTimerPipe_Factory"),FormatTimerPipe.\u0275pipe=core.Yjl({name:"formatTimer",type:FormatTimerPipe,pure:!0});class AsmSessionTimerComponent{constructor(config,asmComponentService,routingService,changeDetectorRef,userIdService){this.config=config,this.asmComponentService=asmComponentService,this.routingService=routingService,this.changeDetectorRef=changeDetectorRef,this.userIdService=userIdService,this.subscriptions=new Subscription.w,this.maxStartDelayInSeconds=6e4}ngOnInit(){this.timeLeft=this.getTimerStartDelayInSeconds(),this.interval=setInterval(()=>{this.timeLeft>0?this.timeLeft--:(clearInterval(this.interval),this.asmComponentService.logoutCustomerSupportAgentAndCustomer()),this.changeDetectorRef.markForCheck()},1e3),this.resetOnNavigate(),this.resetOnCustomerSessionChange()}resetOnNavigate(){this.subscriptions.add(this.routingService.isNavigating().subscribe(isNavigating=>{isNavigating&&this.resetTimer()}))}resetOnCustomerSessionChange(){this.subscriptions.add(this.userIdService.getUserId().pipe((0,distinctUntilChanged.x)()).subscribe(()=>this.resetTimer()))}resetTimer(){this.timeLeft>0&&(this.timeLeft=this.getTimerStartDelayInSeconds())}getTimerStartDelayInSeconds(){return void 0===this.config.asm?.agentSessionTimer?.startingDelayInSeconds?600:this.config.asm.agentSessionTimer.startingDelayInSeconds>this.maxStartDelayInSeconds?this.maxStartDelayInSeconds:this.config.asm.agentSessionTimer.startingDelayInSeconds}ngOnDestroy(){this.subscriptions.unsubscribe(),this.interval&&clearInterval(this.interval)}}__name(AsmSessionTimerComponent,"AsmSessionTimerComponent"),AsmSessionTimerComponent.\u0275fac=__name(function(t){return new(t||AsmSessionTimerComponent)(core.Y36(spartacus_asm_root.hc),core.Y36(AsmComponentService),core.Y36(spartacus_core.Znh),core.Y36(core.sBO),core.Y36(spartacus_core.XBV))},"AsmSessionTimerComponent_Factory"),AsmSessionTimerComponent.\u0275cmp=core.Xpm({type:AsmSessionTimerComponent,selectors:[["cx-asm-session-timer"]],decls:9,vars:12,consts:[[1,"label"],[1,"time"],[1,"reset",3,"title","click"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"span",0),core._uU(1),core.ALo(2,"cxTranslate"),core.qZA(),core.TgZ(3,"span",1),core._uU(4),core.ALo(5,"formatTimer"),core.ALo(6,"cxTranslate"),core.qZA(),core.TgZ(7,"button",2),core.NdJ("click",__name(function(){return ctx.resetTimer()},"AsmSessionTimerComponent_Template_button_click_7_listener")),core.ALo(8,"cxTranslate"),core.qZA()),2&rf&&(core.xp6(1),core.hij("",core.lcZ(2,4,"asm.agentSessionTimer.label"),":"),core.xp6(3),core.AsE("",core.lcZ(5,6,ctx.timeLeft)," ",core.lcZ(6,8,"asm.agentSessionTimer.minutes"),""),core.xp6(3),core.s9C("title",core.lcZ(8,10,"asm.agentSessionTimer.reset")))},"AsmSessionTimerComponent_Template"),dependencies:[spartacus_core.X$D,FormatTimerPipe],encapsulation:2});class CustomerEmulationComponent{constructor(asmComponentService,userAccountFacade){this.asmComponentService=asmComponentService,this.userAccountFacade=userAccountFacade,this.subscription=new Subscription.w}ngOnInit(){this.subscription.add(this.userAccountFacade.get().subscribe(user=>{user&&(this.customer=user)})),this.isCustomerEmulationSessionInProgress$=this.asmComponentService.isCustomerEmulationSessionInProgress()}logoutCustomer(){this.asmComponentService.logoutCustomer()}ngOnDestroy(){this.subscription.unsubscribe()}}__name(CustomerEmulationComponent,"CustomerEmulationComponent"),CustomerEmulationComponent.\u0275fac=__name(function(t){return new(t||CustomerEmulationComponent)(core.Y36(AsmComponentService),core.Y36(spartacus_user_account_root.gf))},"CustomerEmulationComponent_Factory"),CustomerEmulationComponent.\u0275cmp=core.Xpm({type:CustomerEmulationComponent,selectors:[["cx-customer-emulation"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"cx-asm-customerInfo"],[1,"cx-asm-name"],[1,"cx-asm-uid"],["formcontrolname","logoutCustomer",3,"click"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,CustomerEmulationComponent_ng_container_0_Template,10,5,"ng-container",0),core.ALo(1,"async")),2&rf&&core.Q6J("ngIf",core.lcZ(1,1,ctx.isCustomerEmulationSessionInProgress$))},"CustomerEmulationComponent_Template"),dependencies:[common.O5,AsmBindCartComponent,common.Ov,spartacus_core.X$D],encapsulation:2});class AsmToggleUiComponent{constructor(asmService){this.asmService=asmService,this.subscription=new Subscription.w}ngOnInit(){this.subscription.add(this.asmService.getAsmUiState().subscribe(uiState=>{this.isCollapsed=void 0!==uiState.collapsed&&uiState.collapsed}))}toggleUi(){this.asmService.updateAsmUiState({collapsed:!this.isCollapsed})}ngOnDestroy(){this.subscription.unsubscribe()}}__name(AsmToggleUiComponent,"AsmToggleUiComponent"),AsmToggleUiComponent.\u0275fac=__name(function(t){return new(t||AsmToggleUiComponent)(core.Y36(AsmService))},"AsmToggleUiComponent_Factory"),AsmToggleUiComponent.\u0275cmp=core.Xpm({type:AsmToggleUiComponent,selectors:[["cx-asm-toggle-ui"]],decls:4,vars:3,consts:[["tabindex","0","role","button",1,"toggleUi",3,"click"],[3,"ngClass"],["class","label",4,"ngIf"],[1,"label"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"a",0),core.NdJ("click",__name(function(){return ctx.toggleUi()},"AsmToggleUiComponent_Template_a_click_0_listener")),core._UZ(1,"span",1),core.YNc(2,AsmToggleUiComponent_span_2_Template,3,3,"span",2),core.YNc(3,AsmToggleUiComponent_span_3_Template,3,3,"span",2),core.qZA()),2&rf&&(core.xp6(1),core.Q6J("ngClass",ctx.isCollapsed?"expandIcon":"collapseIcon"),core.xp6(1),core.Q6J("ngIf",!ctx.isCollapsed),core.xp6(1),core.Q6J("ngIf",ctx.isCollapsed))},"AsmToggleUiComponent_Template"),dependencies:[common.mk,common.O5,spartacus_core.X$D],encapsulation:2});class AsmMainUiComponent{constructor(authService,csAgentAuthService,asmComponentService,globalMessageService,routingService,asmService,userAccountFacade,launchDialogService){this.authService=authService,this.csAgentAuthService=csAgentAuthService,this.asmComponentService=asmComponentService,this.globalMessageService=globalMessageService,this.routingService=routingService,this.asmService=asmService,this.userAccountFacade=userAccountFacade,this.launchDialogService=launchDialogService,this.iconTypes=spartacus_storefront.e1G,this.disabled=!1,this.startingCustomerSession=!1,this.subscription=new Subscription.w}ngOnInit(){this.customerSupportAgentLoggedIn$=this.csAgentAuthService.isCustomerSupportAgentLoggedIn().pipe((0,distinctUntilChanged.x)(),(0,tap.b)(loggedIn=>{loggedIn||this.closeModal()})),this.csAgentTokenLoading$=this.csAgentAuthService.getCustomerSupportAgentTokenLoading(),this.customer$=this.authService.isUserLoggedIn().pipe((0,switchMap.w)(isLoggedIn=>isLoggedIn?(this.handleCustomerSessionStartRedirection(),this.userAccountFacade.get()):(0,of.of)(void 0))),this.isCollapsed$=this.asmService.getAsmUiState().pipe((0,map.U)(uiState=>void 0!==uiState.collapsed&&uiState.collapsed)),this.subscription.add(this.launchDialogService.dialogClose.pipe((0,filter.h)(result=>Boolean(result))).subscribe(result=>{result.selectedUser&&(this.startCustomerEmulationSession(result.selectedUser),result.actionType===spartacus_asm_root.JR.ORDER_HISTORY&&this.routingService.go({cxRoute:"orders"}))}))}handleCustomerSessionStartRedirection(){this.asmComponentService.isCustomerEmulationSessionInProgress().pipe((0,take.q)(1)).subscribe(isCustomerEmulated=>{this.startingCustomerSession&&isCustomerEmulated&&(this.startingCustomerSession=!1,this.globalMessageService.remove(spartacus_core.xUg.MSG_TYPE_ERROR),this.routingService.go("/"))})}loginCustomerSupportAgent({userId,password}){this.csAgentAuthService.authorizeCustomerSupportAgent(userId,password)}logout(){this.asmComponentService.logoutCustomerSupportAgentAndCustomer()}startCustomerEmulationSession({customerId}){customerId?(this.csAgentAuthService.startCustomerEmulationSession(customerId),this.startingCustomerSession=!0):this.globalMessageService.add({key:"asm.error.noCustomerId"},spartacus_core.xUg.MSG_TYPE_ERROR)}hideUi(){this.disabled=!0,this.asmComponentService.unload()}showCustomList(){this.launchDialogService.openDialogAndSubscribe("ASM_CUSTOMER_LIST",this.element)}closeModal(){this.launchDialogService.closeDialog("logout")}ngOnDestroy(){this.subscription?.unsubscribe()}}__name(AsmMainUiComponent,"AsmMainUiComponent"),AsmMainUiComponent.\u0275fac=__name(function(t){return new(t||AsmMainUiComponent)(core.Y36(spartacus_core.e80),core.Y36(spartacus_asm_root.FA),core.Y36(AsmComponentService),core.Y36(spartacus_core.IWp),core.Y36(spartacus_core.Znh),core.Y36(AsmService),core.Y36(spartacus_user_account_root.gf),core.Y36(spartacus_storefront.Q3W))},"AsmMainUiComponent_Factory"),AsmMainUiComponent.\u0275cmp=core.Xpm({type:AsmMainUiComponent,selectors:[["cx-asm-main-ui"]],viewQuery:__name(function(rf,ctx){if(1&rf&&core.Gf(_c4,5),2&rf){let _t;core.iGM(_t=core.CRH())&&(ctx.element=_t.first)}},"AsmMainUiComponent_Query"),hostVars:2,hostBindings:__name(function(rf,ctx){2&rf&&core.ekj("hidden",ctx.disabled)},"AsmMainUiComponent_HostBindings"),decls:20,vars:23,consts:[[1,"asm-bar"],[1,"asm-bar-branding"],["src","data:image/png;base64,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","width","48","height","24",1,"logo",3,"alt"],[1,"asm-title"],[1,"asm-bar-actions"],["class","cx-asm-customer-list",4,"ngIf"],[4,"ngIf"],["class","close",3,"title","click",4,"ngIf"],["class","logout",3,"title","click",4,"ngIf"],[1,"cx-asm-customer-list"],["tabindex","0","role","button",1,"cx-asm-customer-list-link",3,"click"],["customerListLink",""],[3,"type"],[1,"close",3,"title","click"],[1,"logout",3,"title","click"],[4,"ngIf","ngIfElse"],["showLoginForm",""],["showCustomerSelection",""],[3,"submitEvent",4,"ngIf"],[3,"submitEvent"],[3,"csAgentTokenLoading","submitEvent",4,"ngIf"],[3,"csAgentTokenLoading","submitEvent"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"div",0)(1,"div",1),core._UZ(2,"img",2),core.ALo(3,"cxTranslate"),core.TgZ(4,"div",3),core._uU(5),core.ALo(6,"cxTranslate"),core.qZA()(),core.TgZ(7,"div",4),core.YNc(8,AsmMainUiComponent_div_8_Template,7,4,"div",5),core.ALo(9,"async"),core._UZ(10,"cx-asm-toggle-ui"),core.YNc(11,AsmMainUiComponent_cx_asm_session_timer_11_Template,1,0,"cx-asm-session-timer",6),core.ALo(12,"async"),core.YNc(13,AsmMainUiComponent_button_13_Template,2,3,"button",7),core.ALo(14,"async"),core.ALo(15,"async"),core.YNc(16,AsmMainUiComponent_button_16_Template,2,3,"button",8),core.ALo(17,"async"),core.qZA()(),core.YNc(18,AsmMainUiComponent_ng_container_18_Template,5,4,"ng-container",6),core.ALo(19,"async")),2&rf&&(core.xp6(2),core.s9C("alt",core.lcZ(3,7,"asm.mainLogoLabel")),core.xp6(3),core.hij(" ",core.lcZ(6,9,"asm.mainTitle")," "),core.xp6(3),core.Q6J("ngIf",core.lcZ(9,11,ctx.customerSupportAgentLoggedIn$)),core.xp6(3),core.Q6J("ngIf",core.lcZ(12,13,ctx.customerSupportAgentLoggedIn$)),core.xp6(2),core.Q6J("ngIf",!core.lcZ(14,15,ctx.customerSupportAgentLoggedIn$)&&!core.lcZ(15,17,ctx.csAgentTokenLoading$)),core.xp6(3),core.Q6J("ngIf",core.lcZ(17,19,ctx.customerSupportAgentLoggedIn$)),core.xp6(2),core.Q6J("ngIf",!core.lcZ(19,21,ctx.isCollapsed$)))},"AsmMainUiComponent_Template"),dependencies:[common.O5,spartacus_storefront.oJW,CSAgentLoginFormComponent,CustomerSelectionComponent,AsmSessionTimerComponent,CustomerEmulationComponent,AsmToggleUiComponent,common.Ov,spartacus_core.X$D],encapsulation:2});class CustomerListComponent{constructor(launchDialogService,breakpointService,asmConfig,translation,asmCustomerListFacade){this.launchDialogService=launchDialogService,this.breakpointService=breakpointService,this.asmConfig=asmConfig,this.translation=translation,this.asmCustomerListFacade=asmCustomerListFacade,this.DEFAULT_PAGE_SIZE=5,this.focusConfig={trap:!0,block:!0,autofocus:"customer-list-selector",focusOnEscape:!0},this.iconTypes=spartacus_storefront.e1G,this.BREAKPOINT=spartacus_storefront.Bst,this.currentPage=0,this.maxPage=0,this.loaded=!1,this.listsError=!1,this.listsEmpty=!1,this.teardown=new Subscription.w,this.breakpoint$=this.getBreakpoint()}ngOnInit(){this.pageSize=this.asmConfig.asm?.customerList?.pageSize??this.DEFAULT_PAGE_SIZE,this.customerListConfig=this.asmConfig?.asm?.customerList,this.customerListsPage$=this.asmCustomerListFacade.getCustomerListsState().pipe((0,tap.b)(state=>this.listsError=!!state.error),(0,map.U)(state=>0===state?.data?.userGroups?.length?void(this.listsEmpty=!0):state.data),(0,distinctUntilChanged.x)(),(0,tap.b)(result=>{this.selectedUserGroupId||(this.selectedUserGroupId=result?.userGroups?.[0]?.uid,this.sorts=null,this.fetchCustomers())}))??never.C,this.customerSearchLoading$=this.asmCustomerListFacade.getCustomerListCustomersSearchResultsLoading().pipe((0,tap.b)(loading=>this.loaded=!loading)),this.teardown.add(this.customerSearchLoading$.subscribe()),this.teardown.add(()=>this.asmCustomerListFacade.customerListCustomersSearchReset()),this.customerSearchError$=this.asmCustomerListFacade.getCustomerListCustomersSearchResultsError(),this.customerSearchPage$=this.asmCustomerListFacade.getCustomerListCustomersSearchResults().pipe((0,tap.b)(result=>{result?.sorts&&(this.sorts=result.sorts,this.sortCode=result.pagination?.sort),result?.entries.length<this.pageSize?this.maxPage=result.pagination?.currentPage??0:this.maxPage=this.currentPage+1}))}ngOnDestroy(){this.teardown.unsubscribe()}fetchCustomers(){if(this.selectedUserGroupId){const options={customerListId:this.selectedUserGroupId,pageSize:this.pageSize,currentPage:this.currentPage};this.sortCode&&(options.sort=this.sortCode),this.asmCustomerListFacade.customerListCustomersSearchReset(),this.asmCustomerListFacade.customerListCustomersSearch(options)}}onChangeCustomerGroup(){this.currentPage=0,this.sorts=null,this.sortCode="",this.fetchCustomers()}getGroupName(customerListsPage,id){return customerListsPage?.userGroups?.find(userGroup=>userGroup.uid===id)?.name??""}getBadgeText(customerEntry){return(customerEntry.firstName?.charAt(0)??"")+(customerEntry.lastName?.charAt(0)??"")}startColumnAction(customerEntry,action){this.selectedCustomer=customerEntry;const closeValue={actionType:action,selectedUser:customerEntry};this.closeModal(closeValue)}changeSortCode(sortCode){this.sortCode=sortCode,this.fetchCustomers()}goToNextPage(){this.currentPage>=this.maxPage?this.currentPage=this.maxPage:this.loaded&&(this.currentPage++,this.fetchCustomers())}goToPreviousPage(){this.currentPage<=0?this.currentPage=0:this.loaded&&(this.currentPage--,this.fetchCustomers())}closeModal(reason){this.launchDialogService.closeDialog(reason)}getSortLabels(){return(0,combineLatest.aj)([this.translation.translate("asm.customerList.tableSort.byNameAsc"),this.translation.translate("asm.customerList.tableSort.byNameDesc"),this.translation.translate("asm.customerList.tableSort.byDateAsc"),this.translation.translate("asm.customerList.tableSort.byDateDesc"),this.translation.translate("asm.customerList.tableSort.byOrderDateAsc"),this.translation.translate("asm.customerList.tableSort.byOrderDateDesc")]).pipe((0,map.U)(([textByNameAsc,textByNameDesc,textByOrderDateAsc,textByOrderDateDesc,textByDateAsc,textByDateDesc])=>({byNameAsc:textByNameAsc,byNameDesc:textByNameDesc,byOrderDateAsc:textByOrderDateAsc,byOrderDateDesc:textByOrderDateDesc,byDateAsc:textByDateAsc,byDateDesc:textByDateDesc})))}getBreakpoint(){return this.breakpointService.breakpoint$.pipe((0,map.U)(breakpoint=>((breakpoint===spartacus_storefront.Bst.lg||breakpoint===spartacus_storefront.Bst.xl)&&(breakpoint=spartacus_storefront.Bst.md),breakpoint)))}}__name(CustomerListComponent,"CustomerListComponent"),CustomerListComponent.\u0275fac=__name(function(t){return new(t||CustomerListComponent)(core.Y36(spartacus_storefront.Q3W),core.Y36(spartacus_storefront.r),core.Y36(spartacus_asm_root.hc),core.Y36(spartacus_core.D7D),core.Y36(spartacus_asm_root.AH))},"CustomerListComponent_Factory"),CustomerListComponent.\u0275cmp=core.Xpm({type:CustomerListComponent,selectors:[["cx-customer-list"]],decls:36,vars:22,consts:[[1,"cx-asm-customer-list","cx-modal-container","cx-asm-dialog",3,"cxFocus","esc"],[1,"cx-modal-content"],[1,"cx-dialog-header","modal-header"],["id","asm-customer-list-title",1,"title","modal-title"],["id","asm-customer-list-desc",1,"cx-visually-hidden"],[4,"ngTemplateOutlet"],["class","cx-dialog-sub-header modal-header",3,"tablet-mobile",4,"ngIf"],[1,"cx-dialog-body","modal-body"],[1,"cx-dialog-row"],[1,"cx-dialog-item"],["class","cx-error-state",4,"ngIf"],[4,"ngIf"],["cell",""],["cellContent",""],["sort",""],["pagination",""],["groupSelector",""],["closeButton",""],[1,"cx-dialog-sub-header","modal-header"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cx-header-actions"],[1,"cx-error-state"],["id","asm-cusomer-list-table","role","table",1,"table"],[1,"cx-visually-hidden"],["role","row",4,"ngFor","ngForOf"],["class","cx-empty-state",4,"ngIf"],["role","row"],["role","columnheader","class","cx-avatar-cell",4,"ngIf"],["role","columnheader",4,"ngFor","ngForOf"],["role","columnheader",1,"cx-avatar-cell"],["role","columnheader"],["role","cell","class","cx-avatar-cell",4,"ngIf"],["role","cell","class","cx-multi-cell",4,"ngIf"],["role","cell",1,"cx-avatar-cell"],[1,"cx-avatar"],["role","cell",4,"ngFor","ngForOf"],["role","cell"],["role","cell",1,"cx-multi-cell"],[4,"ngFor","ngForOf"],[1,"cx-empty-state"],[1,"cx-cell-container"],["class","cx-header-text",4,"ngIf"],["class","btn btn-link cx-action-link cx-btn-cell",3,"click",4,"ngIf"],[1,"cx-header-text"],[1,"btn","btn-link","cx-action-link","cx-btn-cell",3,"click"],[3,"cx-action-color","type",4,"ngIf"],[3,"type"],[1,"sort-selector",3,"sortOptions","sortLabels","selectedOption","placeholder","cxNgSelectA11y","sortListEvent"],[1,"cx-pagination-buttons"],["class","btn btn-link cx-action-link cx-btn-previous",3,"disabled","click",4,"ngIf"],["class","btn btn-link cx-action-link cx-btn-next",3,"disabled","click",4,"ngIf"],[1,"btn","btn-link","cx-action-link","cx-btn-previous",3,"disabled","click"],[1,"previous",3,"type"],[1,"btn","btn-link","cx-action-link","cx-btn-next",3,"disabled","click"],[1,"next",3,"type"],["bindLabel","name","bindValue","uid",1,"customer-list-selector",3,"searchable","clearable","tabIndex","ngModel","items","cxNgSelectA11y","change","ngModelChange"],["type","button",1,"close",3,"click"],["aria-hidden","true"]],template:__name(function(rf,ctx){if(1&rf&&(core.TgZ(0,"div",0),core.NdJ("esc",__name(function(){return ctx.closeModal("Escape clicked")},"CustomerListComponent_Template_div_esc_0_listener")),core.TgZ(1,"div",1),core.ynx(2),core.TgZ(3,"div",2)(4,"h2",3),core._uU(5),core.ALo(6,"cxTranslate"),core.qZA(),core.TgZ(7,"div",4),core._uU(8),core.ALo(9,"cxTranslate"),core.qZA(),core.YNc(10,CustomerListComponent_10_Template,1,0,null,5),core.qZA(),core.YNc(11,CustomerListComponent_div_11_Template,7,14,"div",6),core.ALo(12,"async"),core.TgZ(13,"div",7)(14,"div",8)(15,"div",9),core.YNc(16,CustomerListComponent_div_16_Template,3,3,"div",10),core.YNc(17,CustomerListComponent_div_17_Template,3,3,"div",10),core.YNc(18,CustomerListComponent_div_18_Template,3,3,"div",10),core.ALo(19,"async"),core.YNc(20,CustomerListComponent_cx_spinner_20_Template,1,0,"cx-spinner",11),core.ALo(21,"async"),core.YNc(22,CustomerListComponent_div_22_Template,10,8,"div",11),core.ALo(23,"async"),core.qZA()()(),core.BQk(),core.qZA()(),core.YNc(24,CustomerListComponent_ng_template_24_Template,4,3,"ng-template",null,12,core.W1O),core.YNc(26,CustomerListComponent_ng_template_26_Template,2,2,"ng-template",null,13,core.W1O),core.YNc(28,CustomerListComponent_ng_template_28_Template,7,14,"ng-template",null,14,core.W1O),core.YNc(30,CustomerListComponent_ng_template_30_Template,6,8,"ng-template",null,15,core.W1O),core.YNc(32,CustomerListComponent_ng_template_32_Template,5,11,"ng-template",null,16,core.W1O),core.YNc(34,CustomerListComponent_ng_template_34_Template,4,4,"ng-template",null,17,core.W1O)),2&rf){const _r17=core.MAs(35);core.Q6J("cxFocus",ctx.focusConfig),core.xp6(5),core.hij(" ",core.lcZ(6,10,"asm.customerList.title")," "),core.xp6(3),core.hij(" ",core.lcZ(9,12,"asm.customerList.description")," "),core.xp6(2),core.Q6J("ngTemplateOutlet",_r17),core.xp6(1),core.Q6J("ngIf",core.lcZ(12,14,ctx.customerListsPage$)),core.xp6(5),core.Q6J("ngIf",ctx.listsEmpty),core.xp6(1),core.Q6J("ngIf",ctx.listsError),core.xp6(1),core.Q6J("ngIf",core.lcZ(19,16,ctx.customerSearchError$)),core.xp6(2),core.Q6J("ngIf",core.lcZ(21,18,ctx.customerSearchLoading$)),core.xp6(2),core.Q6J("ngIf",core.lcZ(23,20,ctx.customerSearchPage$))}},"CustomerListComponent_Template"),dependencies:[common.sg,common.O5,common.tP,fesm2020_forms.JJ,spartacus_storefront.oJW,ng_select_ng_select.w9,fesm2020_forms.On,spartacus_storefront.ORR,spartacus_storefront.RRe,spartacus_storefront.VnX,spartacus_storefront.iNG,common.Ov,spartacus_core.X$D],encapsulation:2});const defaultCustomerListLayoutConfig={launch:{ASM_CUSTOMER_LIST:{inlineRoot:!0,component:CustomerListComponent,dialogType:spartacus_storefront.Myk.DIALOG}}},defaultAsmLayoutConfig={launch:{ASM:{outlet:"cx-storefront",component:AsmMainUiComponent}}},defaultBindCartLayoutConfig={launch:{ASM_BIND_CART:{inlineRoot:!0,component:AsmBindCartDialogComponent,dialogType:spartacus_storefront.Myk.DIALOG}}};class AsmComponentsModule{}__name(AsmComponentsModule,"AsmComponentsModule"),AsmComponentsModule.\u0275fac=__name(function(t){return new(t||AsmComponentsModule)},"AsmComponentsModule_Factory"),AsmComponentsModule.\u0275mod=core.oAB({type:AsmComponentsModule}),AsmComponentsModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)(defaultAsmLayoutConfig),(0,spartacus_core.i51)(defaultBindCartLayoutConfig),(0,spartacus_core.i51)(defaultCustomerListLayoutConfig)],imports:[common.ez,fesm2020_forms.UX,spartacus_core.LUR,spartacus_storefront.Fym,spartacus_storefront.QX1,ng_select_ng_select.A0,fesm2020_forms.u5,spartacus_storefront.Fme,spartacus_storefront.Ird,spartacus_storefront.oPH,spartacus_storefront.LcC,spartacus_storefront.U67]});var http=__webpack_require__(8664),throwError=__webpack_require__(4724);class OccAsmAdapter{constructor(http2,occEndpointsService,converterService,config,baseSiteService){this.http=http2,this.occEndpointsService=occEndpointsService,this.converterService=converterService,this.config=config,this.baseSiteService=baseSiteService,this.baseSiteService.getActive().subscribe(value=>this.activeBaseSite=value)}getHeaders(){return spartacus_core.Fox.createHeader(spartacus_core.OPk,!0,new http.WM)}customerLists(){const headers=this.getHeaders(),params=(new http.LE).set("baseSite",this.activeBaseSite),url=this.occEndpointsService.buildUrl("asmCustomerLists",{},{baseSite:!1,prefix:!1});return this.http.get(url,{headers,params}).pipe((0,catchError.K)(error=>(0,throwError._)((0,spartacus_core.cxH)(error))),this.converterService.pipeable(CUSTOMER_LISTS_NORMALIZER))}customerSearch(options){const headers=this.getHeaders();let params=(new http.LE).set("baseSite",this.activeBaseSite);void 0!==options.sort?params=params.set("sort",options.sort):options.customerListId||(params=params.set("sort","byNameAsc")),void 0!==options.query&&(params=params.set("query",options.query)),void 0!==options.pageSize&&(params=params.set("pageSize",options.pageSize.toString())),void 0!==options.currentPage&&(params=params.set("currentPage",options.currentPage.toString())),void 0!==options.customerListId&&(params=params.set("customerListId",options.customerListId));const url=this.occEndpointsService.buildUrl("asmCustomerSearch",{},{baseSite:!1,prefix:!1});return this.http.get(url,{headers,params}).pipe((0,catchError.K)(error=>(0,throwError._)((0,spartacus_core.cxH)(error))),this.converterService.pipeable(CUSTOMER_SEARCH_PAGE_NORMALIZER))}bindCart({cartId,customerId}){const headers=spartacus_core.Fox.createHeader(spartacus_core.OPk,!0,new http.WM),params=(new http.LE).set("baseSite",this.activeBaseSite).set("cartId",cartId).set("customerId",customerId),url=this.occEndpointsService.buildUrl("asmBindCart",{},{baseSite:!1,prefix:!1});return this.http.post(url,{},{headers,params}).pipe((0,catchError.K)(error=>(0,throwError._)((0,spartacus_core.cxH)(error))))}}__name(OccAsmAdapter,"OccAsmAdapter"),OccAsmAdapter.\u0275fac=__name(function(t){return new(t||OccAsmAdapter)(core.LFG(http.eN),core.LFG(spartacus_core.Lz0),core.LFG(spartacus_core.IXI),core.LFG(spartacus_asm_root.hc),core.LFG(spartacus_core.Do$))},"OccAsmAdapter_Factory"),OccAsmAdapter.\u0275prov=core.Yz7({token:OccAsmAdapter,factory:OccAsmAdapter.\u0275fac});class AsmOccModule{}__name(AsmOccModule,"AsmOccModule"),AsmOccModule.\u0275fac=__name(function(t){return new(t||AsmOccModule)},"AsmOccModule_Factory"),AsmOccModule.\u0275mod=core.oAB({type:AsmOccModule}),AsmOccModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({backend:{occ:{endpoints:{asmCustomerSearch:"/assistedservicewebservices/customers/search",asmCustomerLists:"/assistedservicewebservices/customerlists",asmBindCart:"/assistedservicewebservices/bind-cart"}}}}),{provide:AsmAdapter,useClass:OccAsmAdapter}],imports:[common.ez]});class AsmModule{}__name(AsmModule,"AsmModule"),AsmModule.\u0275fac=__name(function(t){return new(t||AsmModule)},"AsmModule_Factory"),AsmModule.\u0275mod=core.oAB({type:AsmModule}),AsmModule.\u0275inj=core.cJS({imports:[AsmComponentsModule,AsmCoreModule,AsmOccModule]})}};